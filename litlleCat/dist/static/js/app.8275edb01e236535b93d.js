webpackJsonp([1],{"5OHe":function(t,e){},"93ip":function(t,e){},"9n10":function(t,e){},AsKz:function(t,e){},B2i7:function(t,e){},BFwx:function(t,e){},FiXx:function(t,e){},IMXG:function(t,e){},M6Sr:function(t,e){},MSKx:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("kV13"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=i("C7Lr")({name:"App"},s,!1,function(t){i("zVgr")},null,null).exports,o=i("I29D"),r=i.n(o),c=i("7Y9o"),l={name:"Avatar",props:{imgUrl:String}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-avatar",on:{click:function(e){return t.$emit("sidebar")}}},[i("img",{staticClass:"user-img",attrs:{src:t.imgUrl}})])},staticRenderFns:[]};var d=i("C7Lr")(l,m,!1,function(t){i("a1Rl")},"data-v-347882b5",null).exports,u=i("rVsN"),v=i.n(u);function h(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"animate__";return new v.a(function(a,s){var n=""+i+e,o=t;o.classList.add(i+"animated",n),o.addEventListener("animationend",function t(){o.classList.remove(i+"animated",n),o.removeEventListener("animationend",t),a("Animation ended")})})}var p=i("TCmZ"),f=i.n(p),_={name:"HomeHeader",data:function(){return{input:"",list:[{id:1,content:"godd"}],aniList:["bounce","flash","pulse","rubberBand","shakeX","shakeY","headShake","swing","tada","wobble","jello","heartBeat"]}},components:{Avatar:d},mounted:function(){this.$store.state.userStatus&&this.updateUserInfo()},methods:{getDetailInfo:function(){r.a.post("/api/allClass",f.a.stringify({search:this.input})).then(this.getDataSucc)},getDataSucc:function(t){t=t.data,this.list=t.data.movieList},itemClick:function(t){this.$router.push("/detail/"+t.target.dataset.id)},updateUserInfo:function(){r.a.post("/api/usr/usrInfo").then(this.updateInfoSucc)},updateInfoSucc:function(t){t=t.data.data,this.$store.commit("changeNickname",{nickname:t.nickname}),this.$store.commit("changeAvatar",{avatar:t.head_pic})},titleClick:function(t){var e=Math.floor(Math.random()*this.aniList.length);h(t.target,this.aniList[e])},avatarClick:function(t){h(t.target,"bounceIn")},inputClick:function(t){h(t.target,"headShake")}},watch:{input:function(){this.getDetailInfo()}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header-wrapper"},[i("div",{staticClass:"header"},[i("div",{staticClass:"header-left"},[i("div",{staticClass:"header-title",on:{click:t.titleClick}},[t._v("影推")])]),t._v(" "),i("div",{staticClass:"header-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入查询电影信息"},domProps:{value:t.input},on:{click:t.inputClick,input:function(e){e.target.composing||(t.input=e.target.value)}}}),t._v(" "),i("div",{staticClass:"iconfont search-icon"},[t._v("")])]),t._v(" "),this.$store.state.userStatus?i("avatar",{staticClass:"avatar",attrs:{imgUrl:this.$store.state.avatar},on:{sidebar:function(e){return t.$emit("sidebar")}},nativeOn:{click:function(e){return t.avatarClick(e)}}}):i("div",{staticClass:"header-user",on:{click:function(e){return t.$emit("userbox")}}},[i("div",{staticClass:"iconfont user-icon"},[t._v("\n        \n      ")])])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.input,expression:"input"}],ref:"search",staticClass:"search-content"},[i("div",[t._l(t.list,function(e){return i("div",{key:e.movie_id,staticClass:"search-item border-bottom",attrs:{"data-id":e.movie_id},on:{click:function(e){return e.preventDefault(),t.itemClick(e)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),t._v(" "),t.list.length?t._e():i("div",{staticClass:"search-item border-bottom"},[t._v("未找到匹配电影")])],2)])])},staticRenderFns:[]};var C=i("C7Lr")(_,g,!1,function(t){i("VD2b")},"data-v-6515133c",null).exports,k={name:"HomeSwiper",props:{list:Array},data:function(){return{swiperOption:{pagination:{el:".swiper-pagination"},loop:!0,direction:"horizontal"}}},computed:{showSwiper:function(){return this.list.length}},methods:{imgClick:function(t){this.$router.push("/detail/"+t.target.dataset.id)}}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[t.showSwiper?i("swiper",{attrs:{options:t.swiperOption}},[t._l(t.list,function(e){return i("swiper-slide",{key:e.movie_id},[i("img",{staticClass:"swiper-img",attrs:{src:"http://"+e.huge_pic,"data-id":e.movie_id},on:{click:t.imgClick}})])}),t._v(" "),i("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2):t._e()],1)},staticRenderFns:[]};var L=i("C7Lr")(k,w,!1,function(t){i("pI3/")},"data-v-7d691878",null).exports,b={name:"Listc",props:{list:Array},data:function(){return{}}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list-wrapper"},t._l(t.list,function(e){return i("div",{key:e.movie_id,staticClass:"item-wrapper"},[i("router-link",{attrs:{to:"/detail/"+e.movie_id}},[i("div",{staticClass:"item"},[i("div",{staticClass:"item-top"},[i("img",{staticClass:"item-img",attrs:{src:e.cover_pic}})]),t._v(" "),i("div",{staticClass:"item-middle"},[i("div",{staticClass:"item-title"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"item-score"},[t._v(t._s(e.douban_score))])]),t._v(" "),i("div",{staticClass:"item-bottom"},[i("div",{staticClass:"item-desc"},[t._v(t._s(e.classification))]),t._v(" "),i("div",{staticClass:"item-comment"},[i("div",{staticClass:"iconfont comment-icon"},[t._v("")]),t._v(" "),i("div",{staticClass:"item-comment-num"},[t._v("\n              "+t._s(e.comment_count)+"\n            ")])])])])])],1)}),0)},staticRenderFns:[]};var x=i("C7Lr")(b,S,!1,function(t){i("kgYy")},"data-v-4b4de58d",null).exports,$={name:"ListSlider",props:{list:Array,title:String},data:function(){return{newList:this.list}},updated:function(){}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"list-head"},[i("div",{staticClass:"list-title"},[t._v(t._s(t.title))]),t._v(" "),i("router-link",{attrs:{to:"/all"}},[i("div",{staticClass:"list-more"},[t._v("全部电影 >>>")])])],1),t._v(" "),i("div",{staticClass:"list-wrapper"},t._l(t.list,function(e){return i("div",{key:e.movie_id,staticClass:"item-wrapper"},[i("router-link",{attrs:{to:"/detail/"+e.movie_id}},[i("div",{staticClass:"item"},[i("div",{staticClass:"item-top"},[i("img",{staticClass:"item-img",attrs:{src:e.cover_pic}}),t._v(" "),i("div",{staticClass:"item-score"},[t._v(t._s(e.douban_score))])]),t._v(" "),i("div",{staticClass:"item-middle"},[i("div",{staticClass:"item-title"},[t._v(t._s(e.name))])]),t._v(" "),i("div",{staticClass:"item-bottom"},[i("div",{staticClass:"item-desc"},[t._v(t._s(e.classification))]),t._v(" "),i("div",{staticClass:"item-comment"},[i("div",{staticClass:"iconfont comment-icon"},[t._v("")]),t._v(" "),i("div",{staticClass:"item-comment-num"},[t._v("\n                "+t._s(e.comment_count)+"\n              ")])])])])])],1)}),0)])},staticRenderFns:[]};var I=i("C7Lr")($,y,!1,function(t){i("i0Pi")},"data-v-deac988e",null).exports,N=i("wSez"),B=i.n(N),O={name:"HomeSideBar",props:{show:Boolean,list:Array,name:String},components:{Avatar:d},methods:{quit:function(){this.$emit("sidebar"),this.$store.commit("changeUser",{username:"未登录",userStatus:!1}),r.a.post("/api/usr/logout").then(function(){Object(N.Toast)({message:"注销成功",position:"bottom",duration:2e3})})},changeInfo:function(){this.$emit("infobox")},handleLinkClick:function(t){var e=t.target.id;if("1"===e){if(!this.$store.state.userStatus)return void this.$emit("userbox");this.$router.push("/mymovie")}else if("2"===e){if(!this.$store.state.userStatus)return void this.$emit("userbox");this.$router.push("/my")}}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("transition",{attrs:{"enter-active-class":"animate__animated animate__slideInRight animate__faster","leave-active-class":"animate__animated animate__slideOutRight animate__faster"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"sidebar"},[i("div",{staticClass:"user-info",on:{click:t.changeInfo}},[this.$store.state.userStatus?i("avatar",{staticClass:"avatar",attrs:{imgUrl:this.$store.state.avatar}}):i("div",[i("div",{staticClass:"iconfont user-icon"},[t._v("\n            \n          ")])]),t._v(" "),i("div",{staticClass:"user-name"},[t._v(t._s(this.$store.state.nickname))])],1),t._v(" "),t._l(t.list,function(e){return i("div",{key:e.id,staticClass:"link-item",style:{background:e.color},attrs:{id:e.id},on:{click:t.handleLinkClick}},[i("span",{staticClass:"iconfont icons",domProps:{innerHTML:t._s(e.icon)}}),t._v("\n        "+t._s(e.name)+"\n      ")])}),t._v(" "),this.$store.state.userStatus?i("div",{staticClass:"link-item",style:{background:"#6f599c"},on:{click:t.quit}},[i("span",{staticClass:"iconfont icons",domProps:{innerHTML:t._s("&#xe617;")}}),t._v("\n          注销\n      ")]):t._e()],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"cover",on:{click:function(e){return t.$emit("sidebar")}}})],1)},staticRenderFns:[]};var A=i("C7Lr")(O,T,!1,function(t){i("vMu7")},"data-v-241b0620",null).exports,E={name:"User",props:{show:Boolean},components:{},data:function(){return{login:!0,username:"",password:"",repeat:"",usernameLimit:/^\w{0,16}$/,passwordLimit:/^.{6,16}$/,usernameOk:!0,passwordOk:!0,repeatOk:!0}},methods:{userLoginSucc:function(t){this.$emit("userbox"),this.$store.commit("changeUser",{username:this.username,userStatus:!0,nickname:t.nickname,avatar:t.head_pic}),Object(N.Toast)({message:"登陆成功",position:"bottom",duration:2e3})},userLoginCheck:function(t){200===(t=t.data).code?this.userLoginSucc(t.data):Object(N.Toast)({message:t.data.error_msg,position:"bottom",duration:2e3})},inputCheck:function(t){return this.username?this.password?this.usernameOk?this.passwordOk?!!t||(this.repeat===this.password||(Object(N.Toast)({message:"两次输入密码不一致！",position:"bottom",duration:2e3}),!1)):(Object(N.Toast)({message:"密码必须为6-16位！",position:"bottom",duration:2e3}),!1):(Object(N.Toast)({message:"用户名只能用数字字母下划线，长度不超过16！",position:"bottom",duration:2e3}),!1):(Object(N.Toast)({message:"请输入密码！",position:"bottom",duration:2e3}),!1):(Object(N.Toast)({message:"请输入用户名！",position:"bottom",duration:5e3}),!1)},userLogin:function(){if(this.inputCheck(!0)){var t={login_name:this.username,login_pwd:this.password};r.a.post("/api/usr/login",f.a.stringify(t)).then(this.userLoginCheck)}},userRegSucc:function(){this.login=!0,Object(N.Toast)({message:"注册成功",position:"bottom",duration:2e3})},userRegCheck:function(t){200===(t=t.data).code?this.userRegSucc():Object(N.Toast)({message:t.data.error_list[0],position:"bottom",duration:2e3})},userReg:function(){this.inputCheck(!1)&&r.a.post("/api/usr/reg",f.a.stringify({login_name:this.username,login_pwd:this.password,login_pwd2:this.repeat})).then(this.userRegCheck)},usernameCheck:function(){this.usernameOk=!!this.usernameLimit.exec(this.username)},passwordCheck:function(){this.passwordOk=!!this.passwordLimit.exec(this.password)},repeatCheck:function(){this.repeatOk=!(this.repeat!==this.password)}}},M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeInLeft animate__faster","leave-active-class":"animate__animated animate__fadeOutRight animate__faster"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"user"},[i("div",{staticClass:"switch border-bottom"},[i("div",{staticClass:"login",class:{active:t.login},on:{click:function(e){t.login=!0}}},[t._v("\n          登录\n        ")]),t._v(" "),i("div",{staticClass:"reg",class:{active:!t.login},on:{click:function(e){t.login=!1}}},[t._v("\n          注册\n        ")])]),t._v(" "),i("div",{staticClass:"form"},[i("div",{staticClass:"username"},[t._v("\n          账号：\n          "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.username},on:{blur:t.usernameCheck,input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"password"},[t._v("\n          密码：\n          "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{blur:t.passwordCheck,input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),i("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeIn animate__faster","leave-active-class":"animate__animated animate__fadeOut animate__faster"}},[t.login?t._e():i("div",{staticClass:"repeat"},[t._v("\n            确认：\n            "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.repeat,expression:"repeat"}],staticClass:"input",attrs:{type:"password",placeholder:"请重新输入密码"},domProps:{value:t.repeat},on:{blur:t.repeatCheck,input:function(e){e.target.composing||(t.repeat=e.target.value)}}})])]),t._v(" "),t.login?i("button",{staticClass:"btn",on:{click:t.userLogin}},[t._v("登录")]):i("button",{staticClass:"btn",on:{click:t.userReg}},[t._v("注册")])],1)])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"cover",on:{click:function(e){return t.$emit("userbox")}}})],1)},staticRenderFns:[]};var R=i("C7Lr")(E,M,!1,function(t){i("93ip")},"data-v-1c8e1f9c",null).exports,F={name:"ChangeInfo",props:{show:Boolean},data:function(){return{nickname:"",avatar:""}},methods:{handleBtnClick:function(){var t=!1;this.nickname&&(t=!0,r.a.post("/api/usr/setNickname?nickname="+this.nickname).then(function(t){console.log(t)}),this.$store.commit("changeNickname",{nickname:this.nickname})),this.avatar&&(t=!0,r.a.post("/api/usr/setHeadPic",f.a.stringify({picUrl:this.avatar})).then(function(t){}),this.$store.commit("changeAvatar",{avatar:this.avatar})),this.$emit("infobox"),t&&Object(N.Toast)({message:"修改成功！",position:"bottom",duration:2e3})}}},D={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeInLeft animate__faster","leave-active-class":"animate__animated animate__fadeOutRight animate__faster"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"info"},[i("div",{staticClass:"info-title"},[t._v("修改个人信息：")]),t._v(" "),i("div",{staticClass:"form"},[i("div",{staticClass:"nickname"},[t._v("\n          昵称：\n          "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入新昵称",maxlength:"8"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"avatar"},[t._v("\n          头像：\n          "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.avatar,expression:"avatar"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入新头像url"},domProps:{value:t.avatar},on:{input:function(e){e.target.composing||(t.avatar=e.target.value)}}})]),t._v(" "),i("button",{staticClass:"btn",on:{click:t.handleBtnClick}},[t._v("提交")])])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"cover",on:{click:function(e){return t.$emit("infobox")}}})],1)},staticRenderFns:[]};var j=i("C7Lr")(F,D,!1,function(t){i("jigj")},"data-v-20472cfc",null).exports,U={render:function(){var t=this.$createElement;return(this._self._c||t)("transition",[this._t("default")],2)},staticRenderFns:[]};var H=i("C7Lr")({name:"FadeAnimation"},U,!1,function(t){i("MSKx")},"data-v-c75e7cf6",null).exports,P={name:"Rank",props:{title:String,list:Array,icon:String,animationName:String},data:function(){return{swiperOption:{direction:"vertical"}}},methods:{iconClick:function(t){h(t.target,this.animationName)}}},Y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rank-wrapper"},[i("div",{staticClass:"rank-left"},[i("div",{staticClass:"rank-icon iconfont",domProps:{innerHTML:t._s(t.icon)},on:{click:t.iconClick}}),t._v(" "),i("div",{staticClass:"rank-title",on:{click:t.iconClick}},[t._v(t._s(t.title))])]),t._v(" "),i("div",{staticClass:"rank-right"},[i("swiper",{staticClass:"swiper-wrapper",attrs:{options:t.swiperOption}},t._l(t.list,function(e,a){return i("swiper-slide",{key:a,staticClass:"swiper-page"},[i("div",{staticClass:"item-wrapper"},t._l(e,function(e){return i("router-link",{key:e.id,staticClass:"rank-item",attrs:{tag:"div",to:"/detail/"+e.movie_id}},[t._v("\n            "+t._s(e.id)+"."+t._s(e.name)+" "),i("span",{staticClass:"score"},[t._v(t._s(e.douban_score))])])}),1)])}),1)],1)])},staticRenderFns:[]};var V={name:"Home",components:{HomeHeader:C,HomeSwiper:L,HomeList:x,HomeSideBar:A,HomeUser:R,FadeAnimation:H,ListSlider:I,Rank:i("C7Lr")(P,Y,!1,function(t){i("cfa/")},"data-v-1cad2738",null).exports,HomeInfo:j},data:function(){return{SideBar:!1,UserBox:!1,InfoBox:!1,name:"Mokia",movieList:[],scoreList:[],starList:[],commentList:[],SwiperList:[],LinkList:[{id:1,color:"#f3715c",name:"我的电影",icon:"&#xe61b;"}]}},methods:{getSwperList:function(){r.a.post("/api/carousel").then(this.getSwiperSucc)},getSwiperSucc:function(t){t=t.data,this.SwiperList=t.data},getMovieList:function(){r.a.get("/api/allClass?orderBy_condition=view_count").then(this.getListSucc)},getListSucc:function(t){t=t.data,this.movieList=t.data.movieList},toggleSideBar:function(){this.SideBar=!this.SideBar,this.UserBox=!1,this.InfoBox=!1},toggleUserBox:function(){this.UserBox=!this.UserBox,this.SideBar=!1,this.InfoBox=!1},toggleInfoBox:function(){this.InfoBox=!this.InfoBox,this.SideBar=!1,this.UserBox=!1},getScoreList:function(t){for(var e=(t=t.data).data.movieList,i=0;i<e.length;i+=3){for(var a=[],s=0;s<3&&!(i+s>=e.length);s++)a.push({id:i+s+1,name:e[i+s].name,movie_id:e[i+s].movie_id,douban_score:e[i+s].douban_score});this.scoreList.push(a)}},getStarList:function(t){for(var e=(t=t.data).data.movieList,i=0;i<e.length;i+=3){for(var a=[],s=0;s<3&&!(i+s>=e.length);s++)a.push({id:i+s+1,name:e[i+s].name,movie_id:e[i+s].movie_id,douban_score:e[i+s].douban_score});this.starList.push(a)}},getCommentList:function(t){for(var e=(t=t.data).data.movieList,i=0;i<e.length;i+=3){for(var a=[],s=0;s<3&&!(i+s>=e.length);s++)a.push({id:i+s+1,name:e[i+s].name,movie_id:e[i+s].movie_id,douban_score:e[i+s].douban_score});this.commentList.push(a)}},getRank:function(){r.a.get("/api/allClass?orderBy_condition=douban_score#desc").then(this.getScoreList),r.a.get("/api/allClass?orderBy_condition=love_count#desc").then(this.getStarList),r.a.get("/api/allClass?orderBy_condition=comment_count#desc").then(this.getCommentList)}},mounted:function(){this.getMovieList(),this.getRank(),this.getSwperList()}},z={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("home-header",{on:{sidebar:t.toggleSideBar,userbox:t.toggleUserBox}}),t._v(" "),i("home-swiper",{attrs:{list:t.SwiperList}}),t._v(" "),i("list-slider",{attrs:{list:t.movieList,title:"影推热门"}}),t._v(" "),i("rank",{attrs:{title:"评分榜",icon:"&#xe624;",list:t.scoreList,animationName:"tada"}}),t._v(" "),i("rank",{attrs:{title:"收藏榜",icon:"&#xe61b;",list:t.starList,animationName:"swing"}}),t._v(" "),i("rank",{attrs:{title:"评论榜",icon:"&#xe600;",list:t.commentList,animationName:"heartBeat"}}),t._v(" "),i("home-side-bar",{attrs:{show:t.SideBar,name:t.name,list:t.LinkList},on:{sidebar:t.toggleSideBar,infobox:t.toggleInfoBox}}),t._v(" "),i("home-user",{attrs:{show:t.UserBox},on:{userbox:t.toggleUserBox}}),t._v(" "),i("home-info",{attrs:{show:t.InfoBox},on:{infobox:t.toggleInfoBox}})],1)},staticRenderFns:[]};var X=i("C7Lr")(V,z,!1,function(t){i("euFV")},"data-v-6c071b85",null).exports,G=i("ZLEe"),K=i.n(G),q={name:"Header",props:{title:String},methods:{handleIconClick:function(){this.$router.go(-1)}}},J={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"iconfont back-icon",on:{click:this.handleIconClick}},[this._v("")]),this._v(" "),e("div",{staticClass:"title"},[this._v(this._s(this.title))])])},staticRenderFns:[]};var Z=i("C7Lr")(q,J,!1,function(t){i("YAn7")},"data-v-41e84a44",null).exports,W={name:"Movie",props:{movieData:Object},mounted:function(){},data:function(){return{elName:!0,elType:!0,elArea:!0,elActors:!0,elDirector:!0}},methods:{}},Q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"movie border-bottom"},[i("div",{staticClass:"movie-img"},[i("div",{staticClass:"img-wrapper"},[i("img",{staticClass:"inner-img",attrs:{src:t.movieData.cover_pic}}),t._v(" "),i("div",{staticClass:"movie-score"},[t._v(t._s(t.movieData.douban_score))])])]),t._v(" "),i("div",{staticClass:"movie-info"},[i("div",{staticClass:"movie-title"},[i("div",{staticClass:"movie-name",class:{"el-name":t.elName},on:{click:function(e){t.elName=!t.elName}}},[t._v("\n        "+t._s(t.movieData.name)+"\n        "),i("span",{staticClass:"movie-year"},[t._v("("+t._s((t.movieData.pub_date||"").split(" ")[3])+")")])])]),t._v(" "),i("div",{staticClass:"movie-type",class:{"el-type":t.elType},on:{click:function(e){t.elType=!t.elType}}},[i("span",{staticClass:"item-title"},[t._v("类型：")]),t._v(t._s(t.movieData.classification))]),t._v(" "),i("div",{staticClass:"movie-area",class:{"el-area":t.elArea},on:{click:function(e){t.elArea=!t.elArea}}},[i("span",{staticClass:"item-title"},[t._v("地区：")]),t._v(t._s(t.movieData.area))]),t._v(" "),i("div",{staticClass:"movie-actors",class:{"el-actors":t.elActors},on:{click:function(e){t.elActors=!t.elActors}}},[i("span",{staticClass:"item-title"},[t._v("主演：")]),t._v(t._s(t.movieData.actors))]),t._v(" "),i("div",{staticClass:"movie-director",class:{"el-director":t.elDirector},on:{click:function(e){t.elDirector=!t.elDirector}}},[i("span",{staticClass:"item-title"},[t._v("导演：")]),t._v(t._s(t.movieData.director))])])])},staticRenderFns:[]};var tt=i("C7Lr")(W,Q,!1,function(t){i("FiXx")},"data-v-49c61915",null).exports,et={name:"Description",props:{desc:String}},it={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container border-bottom"},[e("div",{staticClass:"top"},[this._v("剧情简介")]),this._v(" "),e("div",{staticClass:"desc"},[this._v(this._s(this.desc))])])},staticRenderFns:[]};var at=i("C7Lr")(et,it,!1,function(t){i("IMXG")},"data-v-658a7174",null).exports,st={name:"CommentItem",props:{content:Object,id:[String,Number]},components:{Avatar:d},data:function(){return{timer:null}},methods:{avatarClick:function(t){h(t.target,"bounceIn")},contentClick:function(t){h(t.target,"pulse")}}},nt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item"},[i("div",{staticClass:"user"},[i("avatar",{attrs:{imgUrl:t.content.head_pic},nativeOn:{click:function(e){return t.avatarClick(e)}}}),t._v(" "),i("div",{staticClass:"username"},[t._v(t._s(t.content.nickname))])],1),t._v(" "),i("div",{staticClass:"comment",on:{click:t.contentClick}},[t._v(t._s(t.content.content))])])},staticRenderFns:[]};var ot=i("C7Lr")(st,nt,!1,function(t){i("kOC2")},"data-v-f29fc12c",null).exports,rt={name:"Comment",props:{list:Object},components:{CommentItem:ot},methods:{deleteComment:function(t,e){this.$emit("delete",t,e)}}},ct={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container border-bottom"},[i("div",{staticClass:"top"},[t._v("评论 ("+t._s(Object.keys(t.list).length)+")")]),t._v(" "),i("transition-group",{attrs:{name:"comment",mode:"out-in"}},t._l(t.list,function(e,a){return i("comment-item",{key:JSON.stringify(e),staticClass:"comment-item",attrs:{content:e,id:a},on:{delete:t.deleteComment}})}),1)],1)},staticRenderFns:[]};var lt=i("C7Lr")(rt,ct,!1,function(t){i("B2i7")},"data-v-38cbb441",null).exports,mt={name:"Bottom",props:{stared:Number},data:function(){return{text:""}},methods:{handleBtnClick:function(t){h(t.target,"jello"),this.$store.state.userStatus?this.text&&(this.$emit("newComment",this.text),this.text=""):this.$emit("userbox")},toggleStar:function(){this.$store.state.userStatus?this.$emit("star"):this.$emit("userbox")},inputClick:function(t){h(t.target,"headShake")},starClick:function(t){h(t.target,"swing")}}},dt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom"},[i("div",{staticClass:"star",on:{click:t.toggleStar}},[t.stared?i("div",{staticClass:"iconfont icon-star",on:{click:t.starClick}},[t._v("")]):i("div",{staticClass:"iconfont icon-star",on:{click:t.starClick}},[t._v("")])]),t._v(" "),i("div",{staticClass:"comment"},[i("div",{staticClass:"input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"input-box",attrs:{type:"text",placeholder:"说点儿什么吧"},domProps:{value:t.text},on:{click:t.inputClick,input:function(e){e.target.composing||(t.text=e.target.value)}}})]),t._v(" "),i("button",{staticClass:"btn",on:{click:t.handleBtnClick}},[t._v("提交")])])])},staticRenderFns:[]};var ut=i("C7Lr")(mt,dt,!1,function(t){i("yRGW")},"data-v-c9bc640a",null).exports,vt={name:"Top",props:{show:Boolean},methods:{toTop:function(){var t=setInterval(function(){var e=document.documentElement.scrollTop||document.body.scrollTop,i=e/4;document.documentElement.scrollTop?document.documentElement.scrollTop-=i:document.body.scrollTop-=i,0===e&&clearInterval(t)},10)}}},ht={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"back-to-top iconfont",on:{click:this.toTop}},[this._v("\n    \n  ")])])},staticRenderFns:[]};var pt=i("C7Lr")(vt,ht,!1,function(t){i("SYLm")},"data-v-50283116",null).exports,ft={name:"Detail",components:{DetailHeader:Z,DetailMovie:tt,DetailDescription:at,DetailComment:lt,DetailBottom:ut,User:R,Top:pt},data:function(){return{show:!1,movieObj:{},stared:0,topShow:!1,list:{}}},methods:{getDetailInfo:function(){r.a.get("/api/movieInfo/"+this.$route.params.id).then(this.getDataSucc)},getDataSucc:function(t){t=t.data,this.movieObj=t.data,this.stared=t.data.stared},getCommentInfo:function(){r.a.get("/api/getComment/"+this.$route.params.id).then(this.getCommentSucc)},getCommentSucc:function(t){t=t.data,this.list=t.data.commentList},addCommentSucc:function(t){var e={nickname:this.$store.state.nickname,head_pic:this.$store.state.avatar,content:t},i=K()(this.list).length;this.$set(this.list,String(i),e),Object(N.Toast)({message:"评论成功",position:"bottom",duration:2e3})},addCommentCheck:function(t){-1!==(t=t.data).code?this.addCommentSucc(t.data.comment):Object(N.Toast)({message:"长度超出限制（300个字符内）",position:"bottom",duration:2e3})},addNewComment:function(t){r.a.post("/api/postUpComment",f.a.stringify({movie_id:this.$route.params.id,commentContent:t})).then(this.addCommentCheck)},toggleUserBox:function(){this.show=!this.show},addStar:function(){r.a.post("/api/usr/addLove/"+this.$route.params.id).then(function(){Object(N.Toast)({message:"收藏成功",position:"bottom",duration:2e3})})},deleteStar:function(){r.a.post("/api/usr/deleteMyLove/"+this.$route.params.id).then(function(){Object(N.Toast)({message:"取消收藏成功",position:"bottom",duration:2e3})})},handleStar:function(){this.stared?this.deleteStar():this.addStar(),this.stared=0===this.stared?1:0},handleScroll:function(){var t=document.documentElement.scrollTop||document.body.scrollTop;this.topShow=t>20}},mounted:function(){this.getDetailInfo(),this.getCommentInfo(),window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},_t={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("detail-header",{attrs:{title:"影推"}}),t._v(" "),i("detail-movie",{attrs:{movieData:t.movieObj}}),t._v(" "),i("detail-description",{attrs:{desc:t.movieObj.description}}),t._v(" "),i("detail-comment",{attrs:{list:t.list}}),t._v(" "),i("detail-bottom",{attrs:{stared:t.stared},on:{newComment:t.addNewComment,userbox:t.toggleUserBox,star:t.handleStar}}),t._v(" "),i("user",{attrs:{show:t.show},on:{userbox:t.toggleUserBox}}),t._v(" "),i("top",{staticClass:"top",attrs:{show:t.topShow}})],1)},staticRenderFns:[]};var gt=i("C7Lr")(ft,_t,!1,function(t){i("iYP8")},"data-v-692efc40",null).exports,Ct={name:"Choose",props:{title:String,list:Array},data:function(){return{chooseIndex:0}},methods:{handleItemClick:function(t){var e=t.target.dataset.name;this.chooseIndex=t.target.id,this.$emit("choose",e)}}},kt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("ul",{staticClass:"choose"},[i("li",{key:0,staticClass:"title item",class:{active:0==t.chooseIndex},attrs:{id:0,"data-name":""},on:{click:t.handleItemClick}},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),t._l(t.list,function(e,a){return i("li",{key:a+1,staticClass:"item",class:{active:t.chooseIndex==a+1},attrs:{"data-name":e,id:a+1},on:{click:t.handleItemClick}},[t._v("\n      "+t._s(e)+"\n    ")])})],2)])},staticRenderFns:[]};var wt={name:"AllMovie",components:{AllHeader:Z,AllList:x,AllChoose:i("C7Lr")(Ct,kt,!1,function(t){i("AsKz")},"data-v-05daf756",null).exports,Top:pt},data:function(){return{className:"",areaName:"",movieList:[],classNames:[],areaNames:[],page:1,isLoading:!1,topShow:!1,changed:!1,conditions:["年份","评论","收藏"],condition:"",orders:["升序"],order:""}},methods:{getMovieList:function(){this.changed&&(this.page=1),this.isLoading=!0;var t={page_request:this.page};this.className&&(t.class=this.className),this.areaName&&(t.area=this.areaName);var e="douban_score",i="#desc";"年份"===this.condition?e="pub_date":"评论"===this.condition?e="comment_count":"收藏"===this.condition&&(e="love_count"),"升序"===this.order&&(i="#asc"),t.orderBy_condition=e+i,r.a.post("/api/allClass",f.a.stringify(t)).then(this.getListSucc)},getListSucc:function(t){this.changed&&(this.movieList=[],this.changed=!1),t=t.data,this.movieList=this.movieList.concat(t.data.movieList),this.isLoading=!1},classChange:function(t){this.className=t},areaChange:function(t){this.areaName=t},conditionChange:function(t){this.condition=t},orderChange:function(t){this.order=t},getClassName:function(){r.a.get("/api/static/classNames").then(this.getClassSucc)},getClassSucc:function(t){t=t.data,this.classNames=t.data.classNames},getAreaName:function(){r.a.get("/api/static/areaNames").then(this.getAreaSucc)},getAreaSucc:function(t){t=t.data,this.areaNames=t.data.areaNames},handleScroll:function(){var t=document.documentElement.clientHeight,e=document.body.scrollHeight,i=document.documentElement.scrollTop||document.body.scrollTop;t+i>e-30&&(this.isLoading||(++this.page,this.getMovieList())),this.topShow=i>20}},watch:{className:function(){this.changed=!0,this.getMovieList()},areaName:function(){this.changed=!0,this.getMovieList()},condition:function(){this.changed=!0,this.getMovieList()},order:function(){this.changed=!0,this.getMovieList()}},mounted:function(){this.getMovieList(),this.getClassName(),this.getAreaName(),window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},Lt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("all-header",{attrs:{title:"全部电影"}}),t._v(" "),i("all-choose",{staticClass:"choose",attrs:{title:"全部分类",list:t.classNames},on:{choose:t.classChange}}),t._v(" "),i("all-choose",{attrs:{title:"全部地区",list:t.areaNames},on:{choose:t.areaChange}}),t._v(" "),i("all-choose",{attrs:{title:"按评分排序",list:t.conditions},on:{choose:t.conditionChange}}),t._v(" "),i("all-choose",{staticClass:"order",attrs:{title:"降序排序",list:t.orders},on:{choose:t.orderChange}}),t._v(" "),i("all-list",{staticClass:"movie-list",attrs:{list:t.movieList}}),t._v(" "),i("top",{attrs:{show:t.topShow}})],1)},staticRenderFns:[]};var bt=i("C7Lr")(wt,Lt,!1,function(t){i("mmN7")},"data-v-1ae920c2",null).exports,St={name:"ListSliderForMyComment",props:{list:Array,title:String},data:function(){return{newList:this.list,chooseIndex:0,timer:null}},updated:function(){},methods:{handleItemClick:function(t){var e=t.target.dataset.id,i=t.target.dataset.index;this.chooseIndex=i,this.$emit("choose",e)},touchStart:function(t){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.$router.push("/detail/"+t.target.dataset.id)},600)},touchEnd:function(){clearTimeout(this.timer)},touchMove:function(){clearTimeout(this.timer)},moreClick:function(){var t=this.$refs["movie-"+this.chooseIndex][0].dataset.id;this.$router.push("/detail/"+t)}}},xt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"list-head"},[i("div",{staticClass:"list-title"},[t._v(t._s(t.title))]),t._v(" "),i("div",{staticClass:"list-more",on:{click:t.moreClick}},[t._v("查看该电影详情 >>>")])]),t._v(" "),i("div",{staticClass:"list-wrapper"},t._l(t.list,function(e,a){return i("div",{key:e.movie_id,staticClass:"item-wrapper",class:{active:t.chooseIndex==a}},[i("div",{ref:"movie-"+a,refInFor:!0,staticClass:"item-cover",attrs:{"data-id":e.movie_id,"data-index":a},on:{click:t.handleItemClick,touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}}),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item-top"},[i("img",{staticClass:"item-img",attrs:{src:e.cover_pic}}),t._v(" "),i("div",{staticClass:"item-score"},[t._v(t._s(e.douban_score))])]),t._v(" "),i("div",{staticClass:"item-middle"},[i("div",{staticClass:"item-title"},[t._v(t._s(e.name))])]),t._v(" "),i("div",{staticClass:"item-bottom"},[i("div",{staticClass:"item-desc"},[t._v(t._s(e.classification))])])])])}),0)])},staticRenderFns:[]};var $t=i("C7Lr")(St,xt,!1,function(t){i("ruX6")},"data-v-ac14e824",null).exports,yt={name:"CommentItemForMyComment",props:{content:Object,id:[String,Number]},components:{Avatar:d},data:function(){return{timer:null,del:!1}},methods:{avatarClick:function(t){h(t.target,"bounceIn")},contentClick:function(){this.del=!this.del},btnClick:function(){this.$emit("delete",this.id,this.content.time),Object(N.Toast)({message:"删除成功",position:"bottom",duration:2e3})}}},It={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item"},[i("div",{staticClass:"user",class:{"user-move":t.del}},[i("avatar",{attrs:{imgUrl:this.$store.state.avatar},nativeOn:{click:function(e){return t.avatarClick(e)}}}),t._v(" "),i("div",{staticClass:"username"},[t._v(t._s(this.$store.state.nickname))])],1),t._v(" "),i("div",{staticClass:"comment",class:{"comment-move":t.del},on:{click:t.contentClick}},[t._v(t._s(t.content.content))]),t._v(" "),i("div",{staticClass:"delete",class:{"delete-move":t.del},on:{click:t.btnClick}},[t._v("删除")])])},staticRenderFns:[]};var Nt=i("C7Lr")(yt,It,!1,function(t){i("YORt")},"data-v-68fe916e",null).exports,Bt={name:"CommentForMyComment",props:{list:Array},components:{CommentItem:Nt},methods:{deleteComment:function(t,e){this.$emit("delete",t,e)}}},Ot={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container border-bottom"},[i("div",{staticClass:"top"},[t._v("评论 ("+t._s(Object.keys(t.list).length)+")")]),t._v(" "),i("transition-group",{attrs:{name:"comment",mode:"out-in"}},t._l(t.list,function(e,a){return i("comment-item",{key:JSON.stringify(e),staticClass:"comment-item",attrs:{content:e,id:a},on:{delete:t.deleteComment}})}),1)],1)},staticRenderFns:[]};var Tt={name:"MyMovie",components:{MovieList:$t,Comment:i("C7Lr")(Bt,Ot,!1,function(t){i("BFwx")},"data-v-34206af7",null).exports,CommentHeader:Z,Top:pt,LoveList:I},data:function(){return{movieList:[],id:0,commentList:[],topShow:!1,loveList:[]}},methods:{getMyLove:function(){r.a.get("/api/usr/myLove").then(this.getLoveSucc)},getLoveSucc:function(t){t=t.data,this.loveList=t.data},handleScroll:function(){var t=document.documentElement.scrollTop||document.body.scrollTop;this.topShow=t>20},updateUserInfo:function(){r.a.post("/api/usr/usrInfo").then(this.updateInfoSucc)},updateInfoSucc:function(t){t=t.data.data,this.$store.commit("changeNickname",{nickname:t.nickname}),this.$store.commit("changeAvatar",{avatar:t.head_pic})},getMovieList:function(){r.a.post("/api/usr/myCommentMovie").then(this.getMovieSucc)},getMovieSucc:function(t){t=t.data,this.movieList=t.data.movieList,this.movieList.length&&(this.id=this.movieList[0].movie_id,this.getCommentList())},movieChange:function(t){this.id=t,this.getCommentList()},getCommentList:function(){r.a.post("/api/usr/myComment",f.a.stringify({movie_id:this.id})).then(this.getCommentSucc)},getCommentSucc:function(t){t=t.data,this.commentList=t.data.commentList},deleteComment:function(t,e){this.commentList.splice(t,1),r.a.post("/api/usr/deleteMyComment/"+e).then(function(t){})}},mounted:function(){this.getMovieList(),this.updateUserInfo(),this.getMyLove(),window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},At={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("comment-header",{attrs:{title:"我的电影"}}),t._v(" "),i("love-list",{staticClass:"love-list",attrs:{list:t.loveList,title:"我的收藏"}}),t._v(" "),i("movie-list",{staticClass:"movie-list",attrs:{title:"我的评论",list:t.movieList},on:{choose:t.movieChange}}),t._v(" "),i("comment",{directives:[{name:"show",rawName:"v-show",value:t.movieList.length,expression:"movieList.length"}],attrs:{list:t.commentList},on:{delete:t.deleteComment}}),t._v(" "),i("top",{attrs:{show:t.topShow}})],1)},staticRenderFns:[]};var Et=i("C7Lr")(Tt,At,!1,function(t){i("PsEA")},"data-v-7e7d135d",null).exports;a.default.use(c.a);var Mt=new c.a({routes:[{path:"/",name:"Home",component:X},{path:"/detail/:id",name:"Detail",component:gt},{path:"/all",name:"All",component:bt},{path:"/mymovie",name:"MyMovie",component:Et}],scrollBehavior:function(t,e,i){return{x:0,y:0}}}),Rt=i("iDdd"),Ft=i.n(Rt),Dt=i("ZaBw"),jt=i.n(Dt),Ut=i("kciL");a.default.use(Ut.a);var Ht=localStorage.getItem("username")||"未登录",Pt=localStorage.getItem("userStatus")||!1,Yt=localStorage.getItem("nickname")||"未登录",Vt=localStorage.getItem("avatar")||"static/avatar.jpeg",zt=new Ut.a.Store({state:{username:Ht,userStatus:Pt,nickname:Yt,avatar:Vt},mutations:{changeUser:function(t,e){t.username=e.username,t.userStatus=e.userStatus,t.nickname=e.nickname,t.avatar=e.avatar,localStorage.setItem("username",e.username),localStorage.setItem("userStatus",e.userStatus),localStorage.setItem("nickname",e.nickname),localStorage.setItem("avatar",e.avatar),e.userStatus||(localStorage.removeItem("username"),localStorage.removeItem("userStatus"),localStorage.removeItem("nickname"),localStorage.removeItem("avatar"))},changeNickname:function(t,e){t.nickname=e.nickname,localStorage.setItem("nickname",e.nickname)},changeAvatar:function(t,e){t.avatar=e.avatar,localStorage.setItem("avatar",e.avatar)}}}),Xt=(i("9n10"),i("M6Sr"),i("TzC8"),i("e/er"),i("5OHe"),i("V5iU")),Gt=i.n(Xt);a.default.prototype.$axios=r.a,a.default.config.productionTip=!1,Ft.a.attach(document.body),a.default.use(jt.a),a.default.use(Gt.a),a.default.use(B.a),r.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",new a.default({el:"#app",router:Mt,store:zt,components:{App:n},template:"<App/>"})},PsEA:function(t,e){},SYLm:function(t,e){},TzC8:function(t,e){},V5iU:function(t,e){},VD2b:function(t,e){},YAn7:function(t,e){},YORt:function(t,e){},a1Rl:function(t,e){},"cfa/":function(t,e){},"e/er":function(t,e){},euFV:function(t,e){},i0Pi:function(t,e){},iYP8:function(t,e){},jigj:function(t,e){},kOC2:function(t,e){},kgYy:function(t,e){},mmN7:function(t,e){},"pI3/":function(t,e){},ruX6:function(t,e){},vMu7:function(t,e){},yRGW:function(t,e){},zVgr:function(t,e){}},["NHnr"]);