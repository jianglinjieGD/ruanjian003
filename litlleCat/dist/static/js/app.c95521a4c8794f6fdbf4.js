webpackJsonp([1],{"+YrK":function(t,e){},"/06N":function(t,e){},"1/2E":function(t,e){},"2/Xu":function(t,e){},"21cN":function(t,e){},"3+qx":function(t,e){},"5Gq2":function(t,e){},"5wRQ":function(t,e){},"6GzY":function(t,e){},"7f7P":function(t,e){},"9n10":function(t,e){},"F9+v":function(t,e){},KXX2:function(t,e){},M6Sr:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=s("VU/8")({name:"App"},a,!1,function(t){s("cqTP")},null,null).exports,o=s("I29D"),r=s.n(o),c=s("/ocq"),l={name:"Avatar",props:{imgUrl:String}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-avatar",on:{click:function(e){return t.$emit("sidebar")}}},[s("img",{staticClass:"user-img",attrs:{src:t.imgUrl}})])},staticRenderFns:[]};var u=s("VU/8")(l,m,!1,function(t){s("3+qx")},"data-v-347882b5",null).exports,d={name:"HomeHeader",data:function(){return{input:"",list:[{id:1,content:"godd"}]}},components:{Avatar:u},mounted:function(){},methods:{getDetailInfo:function(){r.a.get("/api/allClass",{params:{search:this.input}}).then(this.getDataSucc)},getDataSucc:function(t){t=t.data,this.list=t.data.movieList},itemClick:function(t){this.$router.push("/detail/"+t.target.dataset.id)}},watch:{input:function(){this.getDetailInfo()}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header-wrapper"},[s("div",{staticClass:"header"},[t._m(0),t._v(" "),s("div",{staticClass:"header-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入查询电影信息"},domProps:{value:t.input},on:{input:function(e){e.target.composing||(t.input=e.target.value)}}}),t._v(" "),s("div",{staticClass:"iconfont search-icon"},[t._v("")])]),t._v(" "),this.$store.state.userStatus?s("avatar",{staticClass:"avatar",attrs:{imgUrl:this.$store.state.avatar},on:{sidebar:function(e){return t.$emit("sidebar")}}}):s("div",{staticClass:"header-user",on:{click:function(e){return t.$emit("userbox")}}},[s("div",{staticClass:"iconfont user-icon"},[t._v("\n        \n      ")])])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.input,expression:"input"}],ref:"search",staticClass:"search-content"},[s("div",[t._l(t.list,function(e){return s("div",{key:e.movie_id,tag:"div",staticClass:"search-item border-bottom",attrs:{"data-id":e.movie_id},on:{click:function(e){return e.preventDefault(),t.itemClick(e)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),t._v(" "),t.list.length?t._e():s("div",{staticClass:"search-item border-bottom"},[t._v("未找到匹配电影")])],2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header-left"},[e("div",{staticClass:"header-title"},[this._v("影推")])])}]};var h=s("VU/8")(d,v,!1,function(t){s("bpKx")},"data-v-d657759a",null).exports,p={name:"HomeSwiper",props:{list:Array},data:function(){return{swiperOption:{pagination:{el:".swiper-pagination"},loop:!0,direction:"horizontal"}}},computed:{showSwiper:function(){return this.list.length}}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrapper"},[this.showSwiper?e("swiper",{attrs:{options:this.swiperOption}},[this._l(this.list,function(t){return e("swiper-slide",{key:t.movie_id},[e("img",{staticClass:"swiper-img",attrs:{src:t.huge_pic}})])}),this._v(" "),e("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2):this._e()],1)},staticRenderFns:[]};var _=s("VU/8")(p,f,!1,function(t){s("obX7")},"data-v-60d5e085",null).exports,g={name:"Listc",props:{list:Array},data:function(){return{}}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-wrapper"},t._l(t.list,function(e){return s("div",{key:e.movie_id,staticClass:"item-wrapper"},[s("router-link",{attrs:{to:"/detail/"+e.movie_id}},[s("div",{staticClass:"item"},[s("div",{staticClass:"item-top"},[s("img",{staticClass:"item-img",attrs:{src:e.cover_pic}})]),t._v(" "),s("div",{staticClass:"item-middle"},[s("div",{staticClass:"item-title"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"item-score"},[t._v(t._s(e.douban_score))])]),t._v(" "),s("div",{staticClass:"item-bottom"},[s("div",{staticClass:"item-desc"},[t._v(t._s(e.classification))]),t._v(" "),s("div",{staticClass:"item-comment"},[s("div",{staticClass:"iconfont comment-icon"},[t._v("")]),t._v(" "),s("div",{staticClass:"item-comment-num"},[t._v("\n              "+t._s(e.comment_count)+"\n            ")])])])])])],1)}),0)},staticRenderFns:[]};var w=s("VU/8")(g,C,!1,function(t){s("1/2E")},"data-v-4b4de58d",null).exports,k={name:"ListSlider",props:{list:Array,title:String},data:function(){return{newList:this.list}},updated:function(){}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"list-head"},[s("div",{staticClass:"list-title"},[t._v(t._s(t.title))]),t._v(" "),s("router-link",{attrs:{to:"/all"}},[s("div",{staticClass:"list-more"},[t._v("全部电影 >>>")])])],1),t._v(" "),s("div",{staticClass:"list-wrapper"},t._l(t.list,function(e){return s("div",{key:e.movie_id,staticClass:"item-wrapper"},[s("router-link",{attrs:{to:"/detail/"+e.movie_id}},[s("div",{staticClass:"item"},[s("div",{staticClass:"item-top"},[s("img",{staticClass:"item-img",attrs:{src:e.cover_pic}}),t._v(" "),s("div",{staticClass:"item-score"},[t._v(t._s(e.douban_score))])]),t._v(" "),s("div",{staticClass:"item-middle"},[s("div",{staticClass:"item-title"},[t._v(t._s(e.name))])]),t._v(" "),s("div",{staticClass:"item-bottom"},[s("div",{staticClass:"item-desc"},[t._v(t._s(e.classification))]),t._v(" "),s("div",{staticClass:"item-comment"},[s("div",{staticClass:"iconfont comment-icon"},[t._v("")]),t._v(" "),s("div",{staticClass:"item-comment-num"},[t._v("\n                "+t._s(e.comment_count)+"\n              ")])])])])])],1)}),0)])},staticRenderFns:[]};var S=s("VU/8")(k,x,!1,function(t){s("/06N")},"data-v-7d34c444",null).exports,b={name:"HomeSideBar",props:{show:Boolean,list:Array,name:String},components:{Avatar:u},methods:{quit:function(){this.$emit("sidebar"),this.$store.commit("changeUser",{username:"未登录",userStatus:!1}),r.a.post("/api/usr/logout").then(function(){console.log("logout success")})},changeInfo:function(){this.$emit("infobox")},handleLinkClick:function(t){var e=t.target.id;if("1"===e){if(!this.$store.state.userStatus)return void this.$emit("userbox");this.$router.push("/my")}else if("2"===e){if(!this.$store.state.userStatus)return void this.$emit("userbox");this.$router.push("/mycomment")}}}},$={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"sidebar"},[s("div",{staticClass:"user-info",on:{click:t.changeInfo}},[this.$store.state.userStatus?s("avatar",{staticClass:"avatar",attrs:{imgUrl:this.$store.state.avatar}}):s("div",[s("div",{staticClass:"iconfont user-icon"},[t._v("\n          \n        ")])]),t._v(" "),s("div",{staticClass:"user-name"},[t._v(t._s(this.$store.state.nickname))])],1),t._v(" "),t._l(t.list,function(e){return s("div",{key:e.id,staticClass:"link-item",style:{background:e.color},attrs:{id:e.id},on:{click:t.handleLinkClick}},[s("span",{staticClass:"iconfont icons",domProps:{innerHTML:t._s(e.icon)}}),t._v("\n      "+t._s(e.name)+"\n    ")])}),t._v(" "),this.$store.state.userStatus?s("div",{staticClass:"link-item",style:{background:"#6f599c"},on:{click:t.quit}},[s("span",{staticClass:"iconfont icons",domProps:{innerHTML:t._s("&#xe617;")}}),t._v("\n        注销\n    ")]):t._e()],2),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"cover",on:{click:function(e){return t.$emit("sidebar")}}})])},staticRenderFns:[]};var L=s("VU/8")(b,$,!1,function(t){s("NqDg")},"data-v-2b9c5832",null).exports,y={name:"HomeTiles",data:function(){return{list:[{id:1,color:"#FE4C40",name:"全部电影"},{id:2,color:"#fdb933",name:"排行榜"},{id:3,color:"#228fbd",name:"随便看看"},{id:4,color:"#008573",name:"我的收藏"}]}},methods:{getRandomOne:function(){r.a.get("/api/randomOne").then(this.getRandomSucc)},getRandomSucc:function(t){var e=(t=t.data).data.movie_id;this.$router.push("/detail/"+e)},handleTileClick:function(t){var e=t.target.id;if("1"===e)this.$router.push("/all");else if("2"===e)this.$router.push("/top");else if("3"===e)this.getRandomOne();else if("4"===e){if(!this.$store.state.userStatus)return void this.$emit("userbox");this.$router.push("/my")}}}},I={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tile-wrapper"},t._l(t.list,function(e){return s("div",{key:e.id,staticClass:"item",style:{background:e.color},attrs:{id:e.id},on:{click:t.handleTileClick}},[t._v("\n    "+t._s(e.name)+"\n  ")])}),0)},staticRenderFns:[]};var N=s("VU/8")(y,I,!1,function(t){s("YVww")},"data-v-5d11d6ad",null).exports,U=s("TCmZ"),B=s.n(U),D={name:"User",props:{show:Boolean},data:function(){return{login:!0,username:"",password:"",repeat:"",usernameLimit:/^\w{0,16}$/,passwordLimit:/^\w{6,16}$/,usernameOk:!0,passwordOk:!0,repeatOk:!0}},methods:{userLoginSucc:function(t){this.$emit("userbox"),this.$store.commit("changeUser",{username:this.username,userStatus:!0,nickname:t.nickname,avatar:t.head_pic})},userLoginCheck:function(t){200===(t=t.data).code?this.userLoginSucc(t.data):alert(t.data.error_msg)},userLogin:function(){if(this.usernameOk&&this.passwordOk&&this.username&&this.password){var t={login_name:this.username,login_pwd:this.password};r.a.post("/api/usr/login",B.a.stringify(t)).then(this.userLoginCheck)}else alert("用户名以及密码必须是6-16位的数字字母下划线！")},userRegSucc:function(){this.login=!0},userRegCheck:function(t){200===(t=t.data).code?this.userRegSucc():alert("注册失败")},userReg:function(){this.usernameOk&&this.passwordOk&&this.username&&this.password?this.repeat===this.password?r.a.post("/api/usr/reg",B.a.stringify({login_name:this.username,login_pwd:this.password,login_pwd2:this.repeat})).then(this.userRegCheck):alert("两次输入密码不一致！"):alert("用户名以及密码必须是6-16位的数字字母下划线！")},usernameCheck:function(){this.usernameOk=!!this.usernameLimit.exec(this.username)},passwordCheck:function(){this.passwordOk=!!this.passwordLimit.exec(this.password)},repeatCheck:function(){this.repeatOk=!(this.repeat!==this.password)}}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"user"},[s("div",{staticClass:"switch border-bottom"},[s("div",{staticClass:"login",class:{active:t.login},on:{click:function(e){t.login=!0}}},[t._v("\n        登录\n      ")]),t._v(" "),s("div",{staticClass:"reg",class:{active:!t.login},on:{click:function(e){t.login=!1}}},[t._v("\n        注册\n      ")])]),t._v(" "),s("div",{staticClass:"form"},[s("div",{staticClass:"username"},[t._v("\n        账号：\n        "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input",class:{inputError:!t.usernameOk},attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.username},on:{blur:t.usernameCheck,input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"password"},[t._v("\n        密码：\n        "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",class:{inputError:!t.passwordOk},attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{blur:t.passwordCheck,input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),t.login?t._e():s("div",{staticClass:"repeat"},[t._v("\n        确认：\n        "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.repeat,expression:"repeat"}],staticClass:"input",class:{inputError:!t.repeatOk},attrs:{type:"password",placeholder:"请重新输入密码"},domProps:{value:t.repeat},on:{blur:t.repeatCheck,input:function(e){e.target.composing||(t.repeat=e.target.value)}}})]),t._v(" "),t.login?s("button",{staticClass:"btn",on:{click:t.userLogin}},[t._v("登录")]):s("button",{staticClass:"btn",on:{click:t.userReg}},[t._v("注册")])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"cover",on:{click:function(e){return t.$emit("userbox")}}})])},staticRenderFns:[]};var E=s("VU/8")(D,R,!1,function(t){s("Qjq5")},"data-v-89b22374",null).exports,M={name:"ChangeInfo",props:{show:Boolean},data:function(){return{nickname:"",avatar:""}},methods:{handleBtnClick:function(){this.nickname&&(r.a.post("/api/usr/setNickname?nickname="+this.nickname).then(function(t){console.log(t)}),this.$store.commit("changeNickname",{nickname:this.nickname})),this.avatar&&(r.a.post("/api/usr/setHeadPic",B.a.stringify({picUrl:this.avatar})).then(function(t){console.log(t)}),this.$store.commit("changeAvatar",{avatar:this.avatar})),this.$emit("infobox")}}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"wrapper"},[s("div",{staticClass:"info"},[s("div",{staticClass:"info-title"},[t._v("修改个人信息：")]),t._v(" "),s("div",{staticClass:"form"},[s("div",{staticClass:"nickname"},[t._v("\n        昵称：\n        "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入新昵称"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"avatar"},[t._v("\n        头像：\n        "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.avatar,expression:"avatar"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入新头像url"},domProps:{value:t.avatar},on:{input:function(e){e.target.composing||(t.avatar=e.target.value)}}})]),t._v(" "),s("button",{staticClass:"btn",on:{click:t.handleBtnClick}},[t._v("提交")])])]),t._v(" "),s("div",{staticClass:"cover",on:{click:function(e){return t.$emit("infobox")}}})])},staticRenderFns:[]};var O=s("VU/8")(M,F,!1,function(t){s("7f7P")},"data-v-10fa190e",null).exports,V={render:function(){var t=this.$createElement;return(this._self._c||t)("transition",[this._t("default")],2)},staticRenderFns:[]};var A=s("VU/8")({name:"FadeAnimation"},V,!1,function(t){s("x36r")},"data-v-c75e7cf6",null).exports,T={name:"Rank",props:{title:String,list:Array,icon:String},data:function(){return{swiperOption:{direction:"vertical"}}}},H={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rank-wrapper"},[s("div",{staticClass:"rank-left"},[s("div",{staticClass:"rank-icon iconfont",domProps:{innerHTML:t._s(t.icon)}}),t._v(" "),s("div",{staticClass:"rank-title"},[t._v(t._s(t.title))])]),t._v(" "),s("div",{staticClass:"rank-right"},[s("swiper",{staticClass:"swiper-wrapper",attrs:{options:t.swiperOption}},t._l(t.list,function(e,i){return s("swiper-slide",{key:i,staticClass:"swiper-page"},[s("div",{staticClass:"item-wrapper"},t._l(e,function(e){return s("router-link",{key:e.id,staticClass:"rank-item",attrs:{tag:"div",to:"/detail/"+e.movie_id}},[t._v("\n            "+t._s(e.id)+"."+t._s(e.name)+" "),s("span",{staticClass:"score"},[t._v(t._s(e.douban_score))])])}),1)])}),1)],1)])},staticRenderFns:[]};var j={name:"Home",components:{HomeHeader:h,HomeSwiper:_,HomeList:w,HomeSideBar:L,HomeTiles:N,HomeUser:E,FadeAnimation:A,ListSlider:S,Rank:s("VU/8")(T,H,!1,function(t){s("z1/v")},"data-v-48dc21b9",null).exports,HomeInfo:O},data:function(){return{SideBar:!1,UserBox:!1,InfoBox:!1,name:"Mokia",movieList:[],scoreList:[],starList:[],commentList:[],SwiperList:[{movie_id:1,huge_pic:"./static/swiper/1.jpg"},{movie_id:2,huge_pic:"static/swiper/2.jpg"},{movie_id:3,huge_pic:"static/swiper/3.jpg"},{movie_id:4,huge_pic:"static/swiper/4.jpg"},{movie_id:5,huge_pic:"static/swiper/5.jpg"}],LinkList:[{id:1,color:"#7fb80e",name:"我的收藏",icon:"&#xe61b;"},{id:2,color:"#f3715c",name:"我的评论",icon:"&#xe600;"}]}},methods:{getMovieList:function(){r.a.get("/api/allClass").then(this.getListSucc)},getListSucc:function(t){t=t.data,this.movieList=t.data.movieList},toggleSideBar:function(){this.SideBar=!this.SideBar,this.UserBox=!1,this.InfoBox=!1},toggleUserBox:function(){this.UserBox=!this.UserBox,this.SideBar=!1,this.InfoBox=!1},toggleInfoBox:function(){this.InfoBox=!this.InfoBox,this.SideBar=!1,this.UserBox=!1},getScoreList:function(t){for(var e=(t=t.data).data.movieList,s=0;s<e.length;s+=3){for(var i=[],a=0;a<3&&!(s+a>=e.length);a++)i.push({id:s+a+1,name:e[s+a].name,movie_id:e[s+a].movie_id,douban_score:e[s+a].douban_score});this.scoreList.push(i)}},getStarList:function(t){for(var e=(t=t.data).data.movieList,s=0;s<e.length;s+=3){for(var i=[],a=0;a<3&&!(s+a>=e.length);a++)i.push({id:s+a+1,name:e[s+a].name,movie_id:e[s+a].movie_id,douban_score:e[s+a].douban_score});this.starList.push(i)}},getCommentList:function(t){for(var e=(t=t.data).data.movieList,s=0;s<e.length;s+=3){for(var i=[],a=0;a<3&&!(s+a>=e.length);a++)i.push({id:s+a+1,name:e[s+a].name,movie_id:e[s+a].movie_id,douban_score:e[s+a].douban_score});this.commentList.push(i)}},getRank:function(){r.a.get("/api/allClass?orderBy_condition=douban_score#desc").then(this.getScoreList),r.a.get("/api/allClass?orderBy_condition=love_count#desc").then(this.getStarList),r.a.get("/api/allClass?orderBy_condition=comment_count#desc").then(this.getCommentList)}},mounted:function(){this.getMovieList(),this.getRank()}},P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("home-header",{on:{sidebar:t.toggleSideBar,userbox:t.toggleUserBox}}),t._v(" "),s("home-swiper",{attrs:{list:t.SwiperList}}),t._v(" "),s("list-slider",{attrs:{list:t.movieList,title:"影推热门"}}),t._v(" "),s("rank",{attrs:{title:"评分榜",icon:"&#xe624;",list:t.scoreList}}),t._v(" "),s("rank",{attrs:{title:"收藏榜",icon:"&#xe61b;",list:t.starList}}),t._v(" "),s("rank",{attrs:{title:"评论榜",icon:"&#xe600;",list:t.commentList}}),t._v(" "),s("home-side-bar",{attrs:{show:t.SideBar,name:t.name,list:t.LinkList},on:{sidebar:t.toggleSideBar,infobox:t.toggleInfoBox}}),t._v(" "),s("home-user",{attrs:{show:t.UserBox},on:{userbox:t.toggleUserBox}}),t._v(" "),s("home-info",{attrs:{show:t.InfoBox},on:{infobox:t.toggleInfoBox}})],1)},staticRenderFns:[]};var q=s("VU/8")(j,P,!1,function(t){s("xlbo")},"data-v-5dd4cfb0",null).exports,X=s("fZjL"),z=s.n(X),Z={name:"Header",props:{title:String},methods:{handleIconClick:function(){this.$router.go(-1)}}},K={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"iconfont back-icon",on:{click:this.handleIconClick}},[this._v("")]),this._v(" "),e("div",{staticClass:"title"},[this._v(this._s(this.title))])])},staticRenderFns:[]};var Y=s("VU/8")(Z,K,!1,function(t){s("5Gq2")},"data-v-419e6514",null).exports,G={name:"Movie",props:{movieData:Object},mounted:function(){}},Q={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"movie border-bottom"},[s("div",{staticClass:"movie-img"},[s("div",{staticClass:"img-wrapper"},[s("img",{staticClass:"inner-img",attrs:{src:t.movieData.cover_pic}}),t._v(" "),s("div",{staticClass:"movie-score"},[t._v(t._s(t.movieData.douban_score))])])]),t._v(" "),s("div",{staticClass:"movie-info"},[s("div",{staticClass:"movie-title"},[s("div",{staticClass:"movie-name"},[t._v("\n        "+t._s(t.movieData.name)+"\n        "),s("span",{staticClass:"movie-year"},[t._v("("+t._s((t.movieData.pub_date||"").split(" ")[3])+")")])])]),t._v(" "),s("div",{staticClass:"movie-type"},[s("span",{staticClass:"item-title"},[t._v("类型：")]),t._v(t._s(t.movieData.classification))]),t._v(" "),s("div",{staticClass:"movie-area"},[s("span",{staticClass:"item-title"},[t._v("地区：")]),t._v(t._s(t.movieData.area))]),t._v(" "),s("div",{staticClass:"movie-actors"},[s("span",{staticClass:"item-title"},[t._v("主演：")]),t._v(t._s(t.movieData.actors))]),t._v(" "),s("div",{staticClass:"movie-director"},[s("span",{staticClass:"item-title"},[t._v("导演：")]),t._v(t._s(t.movieData.director))])])])},staticRenderFns:[]};var J=s("VU/8")(G,Q,!1,function(t){s("e3ah")},"data-v-3f1cad92",null).exports,W={name:"Description",props:{desc:String}},tt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container border-bottom"},[e("div",{staticClass:"top"},[this._v("剧情简介")]),this._v(" "),e("div",{staticClass:"desc"},[this._v(this._s(this.desc))])])},staticRenderFns:[]};var et=s("VU/8")(W,tt,!1,function(t){s("21cN")},"data-v-50b92fa8",null).exports,st={name:"CommentItem",props:{content:Object,id:[String,Number]},components:{Avatar:u},data:function(){return{timer:null}},methods:{touchStart:function(){var t=this,e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.$store.state.userStatus&&t.$store.state.username===t.content.nickname&&e.$emit("delete",t.id,t.content.time)},600)},touchEnd:function(){clearTimeout(this.timer)},touchMove:function(){clearTimeout(this.timer)}}},it={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[s("div",{staticClass:"user"},[s("avatar",{attrs:{imgUrl:t.content.head_pic}}),t._v(" "),s("div",{staticClass:"username"},[t._v(t._s(t.content.nickname))])],1),t._v(" "),s("div",{staticClass:"comment"},[t._v(t._s(t.content.content))])])},staticRenderFns:[]};var at=s("VU/8")(st,it,!1,function(t){s("gZkL")},"data-v-5a994a5a",null).exports,nt={name:"Comment",props:{list:Object},components:{CommentItem:at},methods:{deleteComment:function(t,e){this.$emit("delete",t,e)}}},ot={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container border-bottom"},[s("div",{staticClass:"top"},[t._v("评论 ("+t._s(Object.keys(t.list).length)+")")]),t._v(" "),t._l(t.list,function(e,i){return s("comment-item",{key:i,attrs:{content:e,id:i},on:{delete:t.deleteComment}})})],2)},staticRenderFns:[]};var rt=s("VU/8")(nt,ot,!1,function(t){s("KXX2")},"data-v-fc688486",null).exports,ct={name:"Bottom",props:{stared:Number},data:function(){return{text:""}},methods:{handleBtnClick:function(){this.$store.state.userStatus?this.text&&(this.$emit("newComment",this.text),this.text=""):this.$emit("userbox")},toggleStar:function(){this.$store.state.userStatus?this.$emit("star"):this.$emit("userbox")}}},lt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bottom"},[s("div",{staticClass:"star",on:{click:t.toggleStar}},[t.stared?s("div",{staticClass:"iconfont icon-star"},[t._v("")]):s("div",{staticClass:"iconfont icon-star"},[t._v("")])]),t._v(" "),s("div",{staticClass:"comment"},[s("div",{staticClass:"input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"input-box",attrs:{type:"text",placeholder:"说点儿什么吧"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]),t._v(" "),s("button",{staticClass:"btn",on:{click:t.handleBtnClick}},[t._v("提交")])])])},staticRenderFns:[]};var mt={name:"Detail",components:{DetailHeader:Y,DetailMovie:J,DetailDescription:et,DetailComment:rt,DetailBottom:s("VU/8")(ct,lt,!1,function(t){s("nZBw")},"data-v-59466845",null).exports,User:E},data:function(){return{show:!1,movieObj:{},stared:0,list:{}}},methods:{getDetailInfo:function(){r.a.get("/api/movieInfo/"+this.$route.params.id).then(this.getDataSucc)},getDataSucc:function(t){t=t.data,this.movieObj=t.data,this.stared=t.data.stared},getCommentInfo:function(){r.a.get("/api/getComment/"+this.$route.params.id).then(this.getCommentSucc)},getCommentSucc:function(t){t=t.data,this.list=t.data.commentList,console.log(t)},addNewComment:function(t){var e={nickname:this.$store.state.nickname,head_pic:this.$store.state.avatar,content:t},s=z()(this.list).length;this.$set(this.list,String(s),e),r.a.post("/api/postUpComment",B.a.stringify({movie_id:this.$route.params.id,commentContent:t})).then(function(t){})},toggleUserBox:function(){this.show=!this.show},addStar:function(){r.a.post("/api/usr/addLove/"+this.$route.params.id).then(function(){console.log("star success")})},deleteStar:function(){r.a.post("/api/usr/deleteMyLove/"+this.$route.params.id).then(function(){console.log("star success")})},handleStar:function(){this.stared?this.deleteStar():this.addStar(),this.stared=0===this.stared?1:0},deleteComment:function(t,e){this.$delete(this.list,t),r.a.post("/api/usr/deleteMyComment/"+e).then(function(t){})}},mounted:function(){this.getDetailInfo(),this.getCommentInfo()}},ut={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("detail-header",{attrs:{title:"影推"}}),t._v(" "),s("detail-movie",{attrs:{movieData:t.movieObj}}),t._v(" "),s("detail-description",{attrs:{desc:t.movieObj.description}}),t._v(" "),s("detail-comment",{attrs:{list:t.list},on:{delete:t.deleteComment}}),t._v(" "),s("detail-bottom",{attrs:{stared:t.stared},on:{newComment:t.addNewComment,userbox:t.toggleUserBox,star:t.handleStar}}),t._v(" "),s("user",{attrs:{show:t.show},on:{userbox:t.toggleUserBox}})],1)},staticRenderFns:[]};var dt=s("VU/8")(mt,ut,!1,function(t){s("yaCV")},"data-v-1bc88d9e",null).exports,vt={name:"MyMovie",components:{MyHeader:Y,MyList:w},data:function(){return{movieList:[]}},methods:{getMyLove:function(){r.a.get("/api/usr/myLove").then(this.getLoveSucc)},getLoveSucc:function(t){t=t.data,this.movieList=t.data}},mounted:function(){this.getMyLove()}},ht={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("my-header",{attrs:{title:"我的收藏"}}),this._v(" "),e("my-list",{staticClass:"movie-list",attrs:{list:this.movieList}})],1)},staticRenderFns:[]};var pt=s("VU/8")(vt,ht,!1,function(t){s("qD/T")},"data-v-5e589d9a",null).exports,ft={name:"Choose",props:{title:String,list:Array},data:function(){return{chooseIndex:0}},methods:{handleItemClick:function(t){var e=t.target.dataset.name;this.chooseIndex=t.target.id,this.$emit("choose",e)}}},_t={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container border-bottom"},[s("ul",{staticClass:"choose"},[s("li",{key:0,staticClass:"title item",class:{active:0==t.chooseIndex},attrs:{id:0,"data-name":""},on:{click:t.handleItemClick}},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),t._l(t.list,function(e,i){return s("li",{key:i+1,staticClass:"item",class:{active:t.chooseIndex==i+1},attrs:{"data-name":e,id:i+1},on:{click:t.handleItemClick}},[t._v("\n      "+t._s(e)+"\n    ")])})],2)])},staticRenderFns:[]};var gt={name:"AllMovie",components:{AllHeader:Y,AllList:w,AllChoose:s("VU/8")(ft,_t,!1,function(t){s("6GzY")},"data-v-46ede3fe",null).exports},data:function(){return{className:"",areaName:"",movieList:[],classNames:[],areaNames:[]}},methods:{getDetailInfo:function(){var t={};this.className&&(t.class=this.className),this.areaName&&(t.area=this.areaName),0===z()(t).length?r.a.get("/api/allClass").then(this.getDataSucc):r.a.get("/api/allClass",{params:t}).then(this.getDataSucc)},getDataSucc:function(t){t=t.data,this.movieList=t.data.movieList},classChange:function(t){this.className=t},areaChange:function(t){this.areaName=t},getClassName:function(){r.a.get("/api/static/classNames").then(this.getClassSucc)},getClassSucc:function(t){t=t.data,this.classNames=t.data.classNames},getAreaName:function(){r.a.get("/api/static/areaNames").then(this.getAreaSucc)},getAreaSucc:function(t){t=t.data,this.areaNames=t.data.areaNames}},watch:{className:function(){this.getDetailInfo()},areaName:function(){this.getDetailInfo()}},mounted:function(){this.getDetailInfo(),this.getClassName(),this.getAreaName()}},Ct={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("all-header",{attrs:{title:"全部电影"}}),t._v(" "),s("all-choose",{staticClass:"choose",attrs:{title:"全部分类",list:t.classNames},on:{choose:t.classChange}}),t._v(" "),s("all-choose",{attrs:{title:"全部地区",list:t.areaNames},on:{choose:t.areaChange}}),t._v(" "),s("all-list",{staticClass:"movie-list",attrs:{list:t.movieList}})],1)},staticRenderFns:[]};var wt=s("VU/8")(gt,Ct,!1,function(t){s("2/Xu")},"data-v-5914d582",null).exports,kt={name:"ListSliderForMyComment",props:{list:Array,title:String},data:function(){return{newList:this.list,chooseIndex:0,timer:null}},updated:function(){},methods:{handleItemClick:function(t){var e=t.target.dataset.id,s=t.target.dataset.index;this.chooseIndex=s,this.$emit("choose",e)},touchStart:function(t){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.$router.push("/detail/"+t.target.dataset.id)},600)},touchEnd:function(){clearTimeout(this.timer)},touchMove:function(){clearTimeout(this.timer)}}},xt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"list-head"},[s("div",{staticClass:"list-title"},[t._v(t._s(t.title))]),t._v(" "),s("router-link",{attrs:{to:"/all"}},[s("div",{staticClass:"list-more"},[t._v("全部电影 >>>")])])],1),t._v(" "),s("div",{staticClass:"list-wrapper"},t._l(t.list,function(e,i){return s("div",{key:e.movie_id,staticClass:"item-wrapper",class:{active:t.chooseIndex==i}},[s("div",{staticClass:"item-cover",attrs:{"data-id":e.movie_id,"data-index":i},on:{click:t.handleItemClick,touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}}),t._v(" "),s("div",{staticClass:"item"},[s("div",{staticClass:"item-top"},[s("img",{staticClass:"item-img",attrs:{src:e.cover_pic}}),t._v(" "),s("div",{staticClass:"item-score"},[t._v(t._s(e.douban_score))])]),t._v(" "),s("div",{staticClass:"item-middle"},[s("div",{staticClass:"item-title"},[t._v(t._s(e.name))])]),t._v(" "),s("div",{staticClass:"item-bottom"},[s("div",{staticClass:"item-desc"},[t._v(t._s(e.classification))])])])])}),0)])},staticRenderFns:[]};var St=s("VU/8")(kt,xt,!1,function(t){s("F9+v")},"data-v-3f5ec824",null).exports,bt={name:"CommentItemForMyComment",props:{content:Object,id:[String,Number]},components:{Avatar:u},data:function(){return{timer:null}},methods:{touchStart:function(){var t=this,e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.$store.state.userStatus&&t.$store.state.username===t.content.nickname&&e.$emit("delete",t.id,t.content.time)},600)},touchEnd:function(){clearTimeout(this.timer)},touchMove:function(){clearTimeout(this.timer)}}},$t={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[s("div",{staticClass:"user"},[s("avatar",{attrs:{imgUrl:this.$store.state.avatar}}),t._v(" "),s("div",{staticClass:"username"},[t._v(t._s(this.$store.state.nickname))])],1),t._v(" "),s("div",{staticClass:"comment"},[t._v(t._s(t.content.content))])])},staticRenderFns:[]};var Lt=s("VU/8")(bt,$t,!1,function(t){s("aDcf")},"data-v-2742265e",null).exports,yt={name:"CommentForMyComment",props:{list:Array},components:{CommentItem:Lt},methods:{deleteComment:function(t,e){this.$emit("delete",t,e)}}},It={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container border-bottom"},[s("div",{staticClass:"top"},[t._v("评论 ("+t._s(Object.keys(t.list).length)+")")]),t._v(" "),t._l(t.list,function(e,i){return s("comment-item",{key:i,attrs:{content:e,id:i},on:{delete:t.deleteComment}})})],2)},staticRenderFns:[]};var Nt={name:"MyComment",components:{MovieList:St,Comment:s("VU/8")(yt,It,!1,function(t){s("5wRQ")},"data-v-ba57efc6",null).exports,CommentHeader:Y},data:function(){return{movieList:[],id:0,commentList:[]}},methods:{getMovieList:function(){r.a.post("/api/usr/myCommentMovie").then(this.getMovieSucc)},getMovieSucc:function(t){t=t.data,this.movieList=t.data.movieList,this.id=this.movieList[0].movie_id,this.getCommentList()},movieChange:function(t){this.id=t,this.getCommentList()},getCommentList:function(){r.a.post("/api/usr/myComment",B.a.stringify({movie_id:this.id})).then(this.getCommentSucc)},getCommentSucc:function(t){t=t.data,this.commentList=t.data.commentList}},mounted:function(){this.getMovieList()}},Ut={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrapper"},[e("comment-header",{attrs:{title:"影推"}}),this._v(" "),e("movie-list",{staticClass:"movie-list",attrs:{title:"我的评论（长按跳转）",list:this.movieList},on:{choose:this.movieChange}}),this._v(" "),e("comment",{attrs:{list:this.commentList}})],1)},staticRenderFns:[]};var Bt=s("VU/8")(Nt,Ut,!1,function(t){s("+YrK")},"data-v-423f6aa7",null).exports;i.default.use(c.a);var Dt=new c.a({routes:[{path:"/",name:"Home",component:q},{path:"/detail/:id",name:"Detail",component:dt},{path:"/my",name:"MyMovie",component:pt},{path:"/all",name:"All",component:wt},{path:"/mycomment",name:"MyComment",component:Bt}],scrollBehavior:function(t,e,s){return{x:0,y:0}}}),Rt=s("iDdd"),Et=s.n(Rt),Mt=s("ZaBw"),Ft=s.n(Mt),Ot=s("kciL");i.default.use(Ot.a);var Vt=localStorage.getItem("username")||"未登录",At=localStorage.getItem("userStatus")||!1,Tt=localStorage.getItem("nickname")||"未登录",Ht=localStorage.getItem("avatar")||"static/avatar.jpeg",jt=new Ot.a.Store({state:{username:Vt,userStatus:At,nickname:Tt,avatar:Ht},mutations:{changeUser:function(t,e){t.username=e.username,t.userStatus=e.userStatus,t.nickname=e.nickname,t.avatar=e.avatar,localStorage.setItem("username",e.username),localStorage.setItem("userStatus",e.userStatus),localStorage.setItem("nickname",e.nickname),localStorage.setItem("avatar",e.avatar),e.userStatus||(localStorage.removeItem("username"),localStorage.removeItem("userStatus"),localStorage.removeItem("nickname"),localStorage.removeItem("avatar"))},changeNickname:function(t,e){t.nickname=e.nickname,localStorage.setItem("nickname",e.nickname)},changeAvatar:function(t,e){t.avatar=e.avatar,localStorage.setItem("avatar",e.avatar)}}});s("9n10"),s("M6Sr"),s("TzC8"),s("S6Il");i.default.prototype.$axios=r.a,i.default.config.productionTip=!1,Et.a.attach(document.body),i.default.use(Ft.a),r.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",new i.default({el:"#app",router:Dt,store:jt,components:{App:n},template:"<App/>"})},NqDg:function(t,e){},Qjq5:function(t,e){},S6Il:function(t,e){},TzC8:function(t,e){},YVww:function(t,e){},aDcf:function(t,e){},bpKx:function(t,e){},cqTP:function(t,e){},e3ah:function(t,e){},gZkL:function(t,e){},nZBw:function(t,e){},obX7:function(t,e){},"qD/T":function(t,e){},x36r:function(t,e){},xlbo:function(t,e){},yaCV:function(t,e){},"z1/v":function(t,e){}},["NHnr"]);