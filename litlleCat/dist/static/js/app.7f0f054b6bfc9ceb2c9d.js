webpackJsonp([1],{"1/2E":function(t,e){},"3+qx":function(t,e){},"5Gq2":function(t,e){},"5OHe":function(t,e){},"6GzY":function(t,e){},"7ff7":function(t,e){},"9n10":function(t,e){},"F/YS":function(t,e){},M6Sr:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=i("VU/8")({name:"App"},s,!1,function(t){i("cqTP")},null,null).exports,o=i("I29D"),r=i.n(o),c=i("/ocq"),m=i("//Fk"),l=i.n(m),d={name:"Avatar",props:{imgUrl:String}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-avatar",on:{click:function(e){return t.$emit("sidebar")}}},[i("img",{staticClass:"user-img",attrs:{src:t.imgUrl}})])},staticRenderFns:[]};var v=i("VU/8")(d,u,!1,function(t){i("3+qx")},"data-v-347882b5",null).exports,h=i("TCmZ"),p=i.n(h),f={name:"HomeHeader",data:function(){return{input:"",list:[{id:1,content:"godd"}],aniList:["bounce","flash","pulse","rubberBand","shakeX","shakeY","headShake","swing","tada","wobble","jello","heartBeat"]}},components:{Avatar:v},mounted:function(){this.$store.state.userStatus&&this.updateUserInfo()},methods:{animateCSS:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"animate__";return new l.a(function(a,s){var n=""+i+e,o=t;o.classList.add(i+"animated",n),o.addEventListener("animationend",function t(){o.classList.remove(i+"animated",n),o.removeEventListener("animationend",t),a("Animation ended")})})},getDetailInfo:function(){r.a.post("/api/allClass",p.a.stringify({search:this.input})).then(this.getDataSucc)},getDataSucc:function(t){t=t.data,this.list=t.data.movieList},itemClick:function(t){this.$router.push("/detail/"+t.target.dataset.id)},updateUserInfo:function(){r.a.post("/api/usr/usrInfo").then(this.updateInfoSucc)},updateInfoSucc:function(t){t=t.data.data,this.$store.commit("changeNickname",{nickname:t.nickname}),this.$store.commit("changeAvatar",{avatar:t.head_pic})},titleClick:function(t){var e=Math.floor(Math.random()*this.aniList.length);this.animateCSS(t.target,this.aniList[e])},avatarClick:function(t){this.animateCSS(t.target,"bounceIn")},inputClick:function(t){this.animateCSS(t.target,"headShake")}},watch:{input:function(){this.getDetailInfo()}}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header-wrapper"},[i("div",{staticClass:"header"},[i("div",{staticClass:"header-left"},[i("div",{staticClass:"header-title",on:{click:t.titleClick}},[t._v("影推")])]),t._v(" "),i("div",{staticClass:"header-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入查询电影信息"},domProps:{value:t.input},on:{click:t.inputClick,input:function(e){e.target.composing||(t.input=e.target.value)}}}),t._v(" "),i("div",{staticClass:"iconfont search-icon"},[t._v("")])]),t._v(" "),this.$store.state.userStatus?i("avatar",{staticClass:"avatar",attrs:{imgUrl:this.$store.state.avatar},on:{sidebar:function(e){return t.$emit("sidebar")}},nativeOn:{click:function(e){return t.avatarClick(e)}}}):i("div",{staticClass:"header-user",on:{click:function(e){return t.$emit("userbox")}}},[i("div",{staticClass:"iconfont user-icon"},[t._v("\n        \n      ")])])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.input,expression:"input"}],ref:"search",staticClass:"search-content"},[i("div",[t._l(t.list,function(e){return i("div",{key:e.movie_id,tag:"div",staticClass:"search-item border-bottom",attrs:{"data-id":e.movie_id},on:{click:function(e){return e.preventDefault(),t.itemClick(e)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),t._v(" "),t.list.length?t._e():i("div",{staticClass:"search-item border-bottom"},[t._v("未找到匹配电影")])],2)])])},staticRenderFns:[]};var g=i("VU/8")(f,_,!1,function(t){i("F/YS")},"data-v-2412dbe4",null).exports,C={name:"HomeSwiper",props:{list:Array},data:function(){return{swiperOption:{pagination:{el:".swiper-pagination"},loop:!0,direction:"horizontal"}}},computed:{showSwiper:function(){return this.list.length}}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrapper"},[this.showSwiper?e("swiper",{attrs:{options:this.swiperOption}},[this._l(this.list,function(t){return e("swiper-slide",{key:t.movie_id},[e("img",{staticClass:"swiper-img",attrs:{src:t.huge_pic}})])}),this._v(" "),e("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2):this._e()],1)},staticRenderFns:[]};var w=i("VU/8")(C,k,!1,function(t){i("obX7")},"data-v-60d5e085",null).exports,b={name:"Listc",props:{list:Array},data:function(){return{}}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list-wrapper"},t._l(t.list,function(e){return i("div",{key:e.movie_id,staticClass:"item-wrapper"},[i("router-link",{attrs:{to:"/detail/"+e.movie_id}},[i("div",{staticClass:"item"},[i("div",{staticClass:"item-top"},[i("img",{staticClass:"item-img",attrs:{src:e.cover_pic}})]),t._v(" "),i("div",{staticClass:"item-middle"},[i("div",{staticClass:"item-title"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"item-score"},[t._v(t._s(e.douban_score))])]),t._v(" "),i("div",{staticClass:"item-bottom"},[i("div",{staticClass:"item-desc"},[t._v(t._s(e.classification))]),t._v(" "),i("div",{staticClass:"item-comment"},[i("div",{staticClass:"iconfont comment-icon"},[t._v("")]),t._v(" "),i("div",{staticClass:"item-comment-num"},[t._v("\n              "+t._s(e.comment_count)+"\n            ")])])])])])],1)}),0)},staticRenderFns:[]};var L=i("VU/8")(b,S,!1,function(t){i("1/2E")},"data-v-4b4de58d",null).exports,x={name:"ListSlider",props:{list:Array,title:String},data:function(){return{newList:this.list}},updated:function(){}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"list-head"},[i("div",{staticClass:"list-title"},[t._v(t._s(t.title))]),t._v(" "),i("router-link",{attrs:{to:"/all"}},[i("div",{staticClass:"list-more"},[t._v("全部电影 >>>")])])],1),t._v(" "),i("div",{staticClass:"list-wrapper"},t._l(t.list,function(e){return i("div",{key:e.movie_id,staticClass:"item-wrapper"},[i("router-link",{attrs:{to:"/detail/"+e.movie_id}},[i("div",{staticClass:"item"},[i("div",{staticClass:"item-top"},[i("img",{staticClass:"item-img",attrs:{src:e.cover_pic}}),t._v(" "),i("div",{staticClass:"item-score"},[t._v(t._s(e.douban_score))])]),t._v(" "),i("div",{staticClass:"item-middle"},[i("div",{staticClass:"item-title"},[t._v(t._s(e.name))])]),t._v(" "),i("div",{staticClass:"item-bottom"},[i("div",{staticClass:"item-desc"},[t._v(t._s(e.classification))]),t._v(" "),i("div",{staticClass:"item-comment"},[i("div",{staticClass:"iconfont comment-icon"},[t._v("")]),t._v(" "),i("div",{staticClass:"item-comment-num"},[t._v("\n                "+t._s(e.comment_count)+"\n              ")])])])])])],1)}),0)])},staticRenderFns:[]};var y=i("VU/8")(x,$,!1,function(t){i("vsO3")},"data-v-deac988e",null).exports,I=i("wSez"),U=i.n(I),N={name:"HomeSideBar",props:{show:Boolean,list:Array,name:String},components:{Avatar:v},methods:{quit:function(){this.$emit("sidebar"),this.$store.commit("changeUser",{username:"未登录",userStatus:!1}),r.a.post("/api/usr/logout").then(function(){Object(I.Toast)({message:"注销成功",position:"bottom",duration:2e3})})},changeInfo:function(){this.$emit("infobox")},handleLinkClick:function(t){var e=t.target.id;if("1"===e){if(!this.$store.state.userStatus)return void this.$emit("userbox");this.$router.push("/my")}else if("2"===e){if(!this.$store.state.userStatus)return void this.$emit("userbox");this.$router.push("/mycomment")}}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("transition",{attrs:{"enter-active-class":"animate__animated animate__slideInRight animate__faster","leave-active-class":"animate__animated animate__slideOutRight animate__faster"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"sidebar"},[i("div",{staticClass:"user-info",on:{click:t.changeInfo}},[this.$store.state.userStatus?i("avatar",{staticClass:"avatar",attrs:{imgUrl:this.$store.state.avatar}}):i("div",[i("div",{staticClass:"iconfont user-icon"},[t._v("\n            \n          ")])]),t._v(" "),i("div",{staticClass:"user-name"},[t._v(t._s(this.$store.state.nickname))])],1),t._v(" "),t._l(t.list,function(e){return i("div",{key:e.id,staticClass:"link-item",style:{background:e.color},attrs:{id:e.id},on:{click:t.handleLinkClick}},[i("span",{staticClass:"iconfont icons",domProps:{innerHTML:t._s(e.icon)}}),t._v("\n        "+t._s(e.name)+"\n      ")])}),t._v(" "),this.$store.state.userStatus?i("div",{staticClass:"link-item",style:{background:"#6f599c"},on:{click:t.quit}},[i("span",{staticClass:"iconfont icons",domProps:{innerHTML:t._s("&#xe617;")}}),t._v("\n          注销\n      ")]):t._e()],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"cover",on:{click:function(e){return t.$emit("sidebar")}}})],1)},staticRenderFns:[]};var B=i("VU/8")(N,T,!1,function(t){i("b6QU")},"data-v-1a717975",null).exports,O={name:"User",props:{show:Boolean},components:{},data:function(){return{login:!0,username:"",password:"",repeat:"",usernameLimit:/^\w{0,16}$/,passwordLimit:/^.{6,16}$/,usernameOk:!0,passwordOk:!0,repeatOk:!0}},methods:{userLoginSucc:function(t){this.$emit("userbox"),this.$store.commit("changeUser",{username:this.username,userStatus:!0,nickname:t.nickname,avatar:t.head_pic}),Object(I.Toast)({message:"登陆成功",position:"bottom",duration:2e3})},userLoginCheck:function(t){200===(t=t.data).code?this.userLoginSucc(t.data):Object(I.Toast)({message:t.data.error_msg,position:"bottom",duration:2e3})},inputCheck:function(t){return this.username?this.password?this.usernameOk?this.passwordOk?!!t||(this.repeat===this.password||(Object(I.Toast)({message:"两次输入密码不一致！",position:"bottom",duration:2e3}),!1)):(Object(I.Toast)({message:"密码必须为6-16位！",position:"bottom",duration:2e3}),!1):(Object(I.Toast)({message:"用户名只能用数字字母下划线，长度不超过16！",position:"bottom",duration:2e3}),!1):(Object(I.Toast)({message:"请输入密码！",position:"bottom",duration:2e3}),!1):(Object(I.Toast)({message:"请输入用户名！",position:"bottom",duration:5e3}),!1)},userLogin:function(){if(this.inputCheck(!0)){var t={login_name:this.username,login_pwd:this.password};r.a.post("/api/usr/login",p.a.stringify(t)).then(this.userLoginCheck)}},userRegSucc:function(){this.login=!0,Object(I.Toast)({message:"注册成功",position:"bottom",duration:2e3})},userRegCheck:function(t){200===(t=t.data).code?this.userRegSucc():Object(I.Toast)({message:t.data.error_list[0],position:"bottom",duration:2e3})},userReg:function(){this.inputCheck(!1)&&r.a.post("/api/usr/reg",p.a.stringify({login_name:this.username,login_pwd:this.password,login_pwd2:this.repeat})).then(this.userRegCheck)},usernameCheck:function(){this.usernameOk=!!this.usernameLimit.exec(this.username)},passwordCheck:function(){this.passwordOk=!!this.passwordLimit.exec(this.password)},repeatCheck:function(){this.repeatOk=!(this.repeat!==this.password)}}},M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeInLeft animate__faster","leave-active-class":"animate__animated animate__fadeOutRight animate__faster"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"user"},[i("div",{staticClass:"switch border-bottom"},[i("div",{staticClass:"login",class:{active:t.login},on:{click:function(e){t.login=!0}}},[t._v("\n          登录\n        ")]),t._v(" "),i("div",{staticClass:"reg",class:{active:!t.login},on:{click:function(e){t.login=!1}}},[t._v("\n          注册\n        ")])]),t._v(" "),i("div",{staticClass:"form"},[i("div",{staticClass:"username"},[t._v("\n          账号：\n          "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.username},on:{blur:t.usernameCheck,input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"password"},[t._v("\n          密码：\n          "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{blur:t.passwordCheck,input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),i("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeIn animate__faster","leave-active-class":"animate__animated animate__fadeOut animate__faster"}},[t.login?t._e():i("div",{staticClass:"repeat"},[t._v("\n            确认：\n            "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.repeat,expression:"repeat"}],staticClass:"input",attrs:{type:"password",placeholder:"请重新输入密码"},domProps:{value:t.repeat},on:{blur:t.repeatCheck,input:function(e){e.target.composing||(t.repeat=e.target.value)}}})])]),t._v(" "),t.login?i("button",{staticClass:"btn",on:{click:t.userLogin}},[t._v("登录")]):i("button",{staticClass:"btn",on:{click:t.userReg}},[t._v("注册")])],1)])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"cover",on:{click:function(e){return t.$emit("userbox")}}})],1)},staticRenderFns:[]};var E=i("VU/8")(O,M,!1,function(t){i("rjUk")},"data-v-1c8e1f9c",null).exports,A={name:"ChangeInfo",props:{show:Boolean},data:function(){return{nickname:"",avatar:""}},methods:{handleBtnClick:function(){var t=!1;this.nickname&&(t=!0,r.a.post("/api/usr/setNickname?nickname="+this.nickname).then(function(t){}),this.$store.commit("changeNickname",{nickname:this.nickname})),this.avatar&&(t=!0,r.a.post("/api/usr/setHeadPic",p.a.stringify({picUrl:this.avatar})).then(function(t){}),this.$store.commit("changeAvatar",{avatar:this.avatar})),this.$emit("infobox"),t&&Object(I.Toast)({message:"修改成功！",position:"bottom",duration:2e3})}}},R={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeInLeft animate__faster","leave-active-class":"animate__animated animate__fadeOutRight animate__faster"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"info"},[i("div",{staticClass:"info-title"},[t._v("修改个人信息：")]),t._v(" "),i("div",{staticClass:"form"},[i("div",{staticClass:"nickname"},[t._v("\n          昵称：\n          "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入新昵称"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"avatar"},[t._v("\n          头像：\n          "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.avatar,expression:"avatar"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入新头像url"},domProps:{value:t.avatar},on:{input:function(e){e.target.composing||(t.avatar=e.target.value)}}})]),t._v(" "),i("button",{staticClass:"btn",on:{click:t.handleBtnClick}},[t._v("提交")])])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"cover",on:{click:function(e){return t.$emit("infobox")}}})],1)},staticRenderFns:[]};var D=i("VU/8")(A,R,!1,function(t){i("UpxS")},"data-v-d7bbc030",null).exports,j={render:function(){var t=this.$createElement;return(this._self._c||t)("transition",[this._t("default")],2)},staticRenderFns:[]};var F=i("VU/8")({name:"FadeAnimation"},j,!1,function(t){i("x36r")},"data-v-c75e7cf6",null).exports,V={name:"Rank",props:{title:String,list:Array,icon:String,animationName:String},data:function(){return{swiperOption:{direction:"vertical"}}},methods:{animateCSS:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"animate__";return new l.a(function(a,s){var n=""+i+e,o=t;o.classList.add(i+"animated",n),o.addEventListener("animationend",function t(){o.classList.remove(i+"animated",n),o.removeEventListener("animationend",t),a("Animation ended")})})},iconClick:function(t){this.animateCSS(t.target,this.animationName)}}},H={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rank-wrapper"},[i("div",{staticClass:"rank-left"},[i("div",{staticClass:"rank-icon iconfont",domProps:{innerHTML:t._s(t.icon)},on:{click:t.iconClick}}),t._v(" "),i("div",{staticClass:"rank-title",on:{click:t.iconClick}},[t._v(t._s(t.title))])]),t._v(" "),i("div",{staticClass:"rank-right"},[i("swiper",{staticClass:"swiper-wrapper",attrs:{options:t.swiperOption}},t._l(t.list,function(e,a){return i("swiper-slide",{key:a,staticClass:"swiper-page"},[i("div",{staticClass:"item-wrapper"},t._l(e,function(e){return i("router-link",{key:e.id,staticClass:"rank-item",attrs:{tag:"div",to:"/detail/"+e.movie_id}},[t._v("\n            "+t._s(e.id)+"."+t._s(e.name)+" "),i("span",{staticClass:"score"},[t._v(t._s(e.douban_score))])])}),1)])}),1)],1)])},staticRenderFns:[]};var q={name:"Home",components:{HomeHeader:g,HomeSwiper:w,HomeList:L,HomeSideBar:B,HomeUser:E,FadeAnimation:F,ListSlider:y,Rank:i("VU/8")(V,H,!1,function(t){i("zk/8")},"data-v-de4909f4",null).exports,HomeInfo:D},data:function(){return{SideBar:!1,UserBox:!1,InfoBox:!1,name:"Mokia",movieList:[],scoreList:[],starList:[],commentList:[],SwiperList:[{movie_id:1,huge_pic:"./static/swiper/1.jpg"},{movie_id:2,huge_pic:"static/swiper/2.jpg"},{movie_id:3,huge_pic:"static/swiper/3.jpg"},{movie_id:4,huge_pic:"static/swiper/4.jpg"},{movie_id:5,huge_pic:"static/swiper/5.jpg"}],LinkList:[{id:1,color:"#7fb80e",name:"我的收藏",icon:"&#xe61b;"},{id:2,color:"#f3715c",name:"我的评论",icon:"&#xe600;"}]}},methods:{getMovieList:function(){r.a.get("/api/allClass").then(this.getListSucc)},getListSucc:function(t){t=t.data,this.movieList=t.data.movieList},toggleSideBar:function(){this.SideBar=!this.SideBar,this.UserBox=!1,this.InfoBox=!1},toggleUserBox:function(){this.UserBox=!this.UserBox,this.SideBar=!1,this.InfoBox=!1},toggleInfoBox:function(){this.InfoBox=!this.InfoBox,this.SideBar=!1,this.UserBox=!1},getScoreList:function(t){for(var e=(t=t.data).data.movieList,i=0;i<e.length;i+=3){for(var a=[],s=0;s<3&&!(i+s>=e.length);s++)a.push({id:i+s+1,name:e[i+s].name,movie_id:e[i+s].movie_id,douban_score:e[i+s].douban_score});this.scoreList.push(a)}},getStarList:function(t){for(var e=(t=t.data).data.movieList,i=0;i<e.length;i+=3){for(var a=[],s=0;s<3&&!(i+s>=e.length);s++)a.push({id:i+s+1,name:e[i+s].name,movie_id:e[i+s].movie_id,douban_score:e[i+s].douban_score});this.starList.push(a)}},getCommentList:function(t){for(var e=(t=t.data).data.movieList,i=0;i<e.length;i+=3){for(var a=[],s=0;s<3&&!(i+s>=e.length);s++)a.push({id:i+s+1,name:e[i+s].name,movie_id:e[i+s].movie_id,douban_score:e[i+s].douban_score});this.commentList.push(a)}},getRank:function(){r.a.get("/api/allClass?orderBy_condition=douban_score#desc").then(this.getScoreList),r.a.get("/api/allClass?orderBy_condition=love_count#desc").then(this.getStarList),r.a.get("/api/allClass?orderBy_condition=comment_count#desc").then(this.getCommentList)}},mounted:function(){this.getMovieList(),this.getRank()}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("home-header",{on:{sidebar:t.toggleSideBar,userbox:t.toggleUserBox}}),t._v(" "),i("home-swiper",{attrs:{list:t.SwiperList}}),t._v(" "),i("list-slider",{attrs:{list:t.movieList,title:"影推热门"}}),t._v(" "),i("rank",{attrs:{title:"评分榜",icon:"&#xe624;",list:t.scoreList,animationName:"tada"}}),t._v(" "),i("rank",{attrs:{title:"收藏榜",icon:"&#xe61b;",list:t.starList,animationName:"swing"}}),t._v(" "),i("rank",{attrs:{title:"评论榜",icon:"&#xe600;",list:t.commentList,animationName:"heartBeat"}}),t._v(" "),i("home-side-bar",{attrs:{show:t.SideBar,name:t.name,list:t.LinkList},on:{sidebar:t.toggleSideBar,infobox:t.toggleInfoBox}}),t._v(" "),i("home-user",{attrs:{show:t.UserBox},on:{userbox:t.toggleUserBox}}),t._v(" "),i("home-info",{attrs:{show:t.InfoBox},on:{infobox:t.toggleInfoBox}})],1)},staticRenderFns:[]};var z=i("VU/8")(q,P,!1,function(t){i("i2eJ")},"data-v-1f329cbc",null).exports,Z=i("fZjL"),J=i.n(Z),Y={name:"Header",props:{title:String},methods:{handleIconClick:function(){this.$router.go(-1)}}},G={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"iconfont back-icon",on:{click:this.handleIconClick}},[this._v("")]),this._v(" "),e("div",{staticClass:"title"},[this._v(this._s(this.title))])])},staticRenderFns:[]};var W=i("VU/8")(Y,G,!1,function(t){i("5Gq2")},"data-v-419e6514",null).exports,X={name:"Movie",props:{movieData:Object},mounted:function(){},data:function(){return{elType:!0,elArea:!0,elActors:!0,elDirector:!0}},methods:{}},Q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"movie border-bottom"},[i("div",{staticClass:"movie-img"},[i("div",{staticClass:"img-wrapper"},[i("img",{staticClass:"inner-img",attrs:{src:t.movieData.cover_pic}}),t._v(" "),i("div",{staticClass:"movie-score"},[t._v(t._s(t.movieData.douban_score))])])]),t._v(" "),i("div",{staticClass:"movie-info"},[i("div",{staticClass:"movie-title"},[i("div",{staticClass:"movie-name"},[t._v("\n        "+t._s(t.movieData.name)+"\n        "),i("span",{staticClass:"movie-year"},[t._v("("+t._s((t.movieData.pub_date||"").split(" ")[3])+")")])])]),t._v(" "),i("div",{staticClass:"movie-type",class:{"el-type":t.elType},on:{click:function(e){t.elType=!t.elType}}},[i("span",{staticClass:"item-title"},[t._v("类型：")]),t._v(t._s(t.movieData.classification))]),t._v(" "),i("div",{staticClass:"movie-area",class:{"el-area":t.elArea},on:{click:function(e){t.elArea=!t.elArea}}},[i("span",{staticClass:"item-title"},[t._v("地区：")]),t._v(t._s(t.movieData.area))]),t._v(" "),i("div",{staticClass:"movie-actors",class:{"el-actors":t.elActors},on:{click:function(e){t.elActors=!t.elActors}}},[i("span",{staticClass:"item-title"},[t._v("主演：")]),t._v(t._s(t.movieData.actors))]),t._v(" "),i("div",{staticClass:"movie-director",class:{"el-director":t.elDirector},on:{click:function(e){t.elDirector=!t.elDirector}}},[i("span",{staticClass:"item-title"},[t._v("导演：")]),t._v(t._s(t.movieData.director))])])])},staticRenderFns:[]};var K=i("VU/8")(X,Q,!1,function(t){i("jDrW")},"data-v-36bc00ed",null).exports,tt={name:"Description",props:{desc:String}},et={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container border-bottom"},[e("div",{staticClass:"top"},[this._v("剧情简介")]),this._v(" "),e("div",{staticClass:"desc"},[this._v(this._s(this.desc))])])},staticRenderFns:[]};var it=i("VU/8")(tt,et,!1,function(t){i("TIr1")},"data-v-658a7174",null).exports,at={name:"CommentItem",props:{content:Object,id:[String,Number]},components:{Avatar:v},data:function(){return{timer:null}},methods:{touchStart:function(){var t=this,e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.$store.state.userStatus&&t.$store.state.username===t.content.nickname&&e.$emit("delete",t.id,t.content.time)},600)},touchEnd:function(){clearTimeout(this.timer)},touchMove:function(){clearTimeout(this.timer)}}},st={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[i("div",{staticClass:"user"},[i("avatar",{attrs:{imgUrl:t.content.head_pic}}),t._v(" "),i("div",{staticClass:"username"},[t._v(t._s(t.content.nickname))])],1),t._v(" "),i("div",{staticClass:"comment"},[t._v(t._s(t.content.content))])])},staticRenderFns:[]};var nt=i("VU/8")(at,st,!1,function(t){i("gZkL")},"data-v-5a994a5a",null).exports,ot={name:"Comment",props:{list:Object},components:{CommentItem:nt},methods:{deleteComment:function(t,e){this.$emit("delete",t,e)}}},rt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container border-bottom"},[i("div",{staticClass:"top"},[t._v("评论 ("+t._s(Object.keys(t.list).length)+")")]),t._v(" "),i("transition-group",{attrs:{name:"comment",mode:"out-in"}},t._l(t.list,function(e,a){return i("comment-item",{key:JSON.stringify(e),staticClass:"comment-item",attrs:{content:e,id:a},on:{delete:t.deleteComment}})}),1)],1)},staticRenderFns:[]};var ct=i("VU/8")(ot,rt,!1,function(t){i("v/5q")},"data-v-38cbb441",null).exports,mt={name:"Bottom",props:{stared:Number},data:function(){return{text:""}},methods:{handleBtnClick:function(){this.$store.state.userStatus?this.text&&(this.$emit("newComment",this.text),this.text=""):this.$emit("userbox")},toggleStar:function(){this.$store.state.userStatus?this.$emit("star"):this.$emit("userbox")}}},lt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom"},[i("div",{staticClass:"star",on:{click:t.toggleStar}},[t.stared?i("div",{staticClass:"iconfont icon-star"},[t._v("")]):i("div",{staticClass:"iconfont icon-star"},[t._v("")])]),t._v(" "),i("div",{staticClass:"comment"},[i("div",{staticClass:"input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"input-box",attrs:{type:"text",placeholder:"说点儿什么吧"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]),t._v(" "),i("button",{staticClass:"btn",on:{click:t.handleBtnClick}},[t._v("提交")])])])},staticRenderFns:[]};var dt={name:"Detail",components:{DetailHeader:W,DetailMovie:K,DetailDescription:it,DetailComment:ct,DetailBottom:i("VU/8")(mt,lt,!1,function(t){i("nZBw")},"data-v-59466845",null).exports,User:E},data:function(){return{show:!1,movieObj:{},stared:0,list:{}}},methods:{getDetailInfo:function(){r.a.get("/api/movieInfo/"+this.$route.params.id).then(this.getDataSucc)},getDataSucc:function(t){t=t.data,this.movieObj=t.data,this.stared=t.data.stared},getCommentInfo:function(){r.a.get("/api/getComment/"+this.$route.params.id).then(this.getCommentSucc)},getCommentSucc:function(t){t=t.data,this.list=t.data.commentList},addNewComment:function(t){var e={nickname:this.$store.state.nickname,head_pic:this.$store.state.avatar,content:t},i=J()(this.list).length;this.$set(this.list,String(i),e),r.a.post("/api/postUpComment",p.a.stringify({movie_id:this.$route.params.id,commentContent:t})).then(function(t){Object(I.Toast)({message:"评论成功",position:"bottom",duration:2e3})})},toggleUserBox:function(){this.show=!this.show},addStar:function(){r.a.post("/api/usr/addLove/"+this.$route.params.id).then(function(){Object(I.Toast)({message:"收藏成功",position:"bottom",duration:2e3})})},deleteStar:function(){r.a.post("/api/usr/deleteMyLove/"+this.$route.params.id).then(function(){Object(I.Toast)({message:"取消收藏成功",position:"bottom",duration:2e3})})},handleStar:function(){this.stared?this.deleteStar():this.addStar(),this.stared=0===this.stared?1:0},deleteComment:function(t,e){this.$delete(this.list,t),r.a.post("/api/usr/deleteMyComment/"+e).then(function(t){})}},mounted:function(){this.getDetailInfo(),this.getCommentInfo()}},ut={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("detail-header",{attrs:{title:"影推"}}),t._v(" "),i("detail-movie",{attrs:{movieData:t.movieObj}}),t._v(" "),i("detail-description",{attrs:{desc:t.movieObj.description}}),t._v(" "),i("detail-comment",{attrs:{list:t.list},on:{delete:t.deleteComment}}),t._v(" "),i("detail-bottom",{attrs:{stared:t.stared},on:{newComment:t.addNewComment,userbox:t.toggleUserBox,star:t.handleStar}}),t._v(" "),i("user",{attrs:{show:t.show},on:{userbox:t.toggleUserBox}})],1)},staticRenderFns:[]};var vt=i("VU/8")(dt,ut,!1,function(t){i("omAu")},"data-v-3abb3a8a",null).exports,ht={name:"MyMovie",components:{MyHeader:W,MyList:L},data:function(){return{movieList:[]}},methods:{getMyLove:function(){r.a.get("/api/usr/myLove").then(this.getLoveSucc)},getLoveSucc:function(t){t=t.data,this.movieList=t.data}},mounted:function(){this.getMyLove()}},pt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("my-header",{attrs:{title:"我的收藏"}}),this._v(" "),e("my-list",{staticClass:"movie-list",attrs:{list:this.movieList}})],1)},staticRenderFns:[]};var ft=i("VU/8")(ht,pt,!1,function(t){i("qD/T")},"data-v-5e589d9a",null).exports,_t={name:"Choose",props:{title:String,list:Array},data:function(){return{chooseIndex:0}},methods:{handleItemClick:function(t){var e=t.target.dataset.name;this.chooseIndex=t.target.id,this.$emit("choose",e)}}},gt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container border-bottom"},[i("ul",{staticClass:"choose"},[i("li",{key:0,staticClass:"title item",class:{active:0==t.chooseIndex},attrs:{id:0,"data-name":""},on:{click:t.handleItemClick}},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),t._l(t.list,function(e,a){return i("li",{key:a+1,staticClass:"item",class:{active:t.chooseIndex==a+1},attrs:{"data-name":e,id:a+1},on:{click:t.handleItemClick}},[t._v("\n      "+t._s(e)+"\n    ")])})],2)])},staticRenderFns:[]};var Ct=i("VU/8")(_t,gt,!1,function(t){i("6GzY")},"data-v-46ede3fe",null).exports,kt={name:"Top",props:{show:Boolean},methods:{toTop:function(){var t=setInterval(function(){var e=document.documentElement.scrollTop||document.body.scrollTop,i=e/4;document.documentElement.scrollTop?document.documentElement.scrollTop-=i:document.body.scrollTop-=i,0===e&&clearInterval(t)},10)}}},wt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"back-to-top iconfont",on:{click:this.toTop}},[this._v("\n    \n  ")])])},staticRenderFns:[]};var bt={name:"AllMovie",components:{AllHeader:W,AllList:L,AllChoose:Ct,Top:i("VU/8")(kt,wt,!1,function(t){i("7ff7")},"data-v-4b49b8a2",null).exports},data:function(){return{className:"",areaName:"",movieList:[],classNames:[],areaNames:[],page:1,isLoading:!1,topShow:!1,changed:!1}},methods:{getMovieList:function(){this.changed&&(this.page=1),this.isLoading=!0;var t={page_request:this.page};this.className&&(t.class=this.className),this.areaName&&(t.area=this.areaName),r.a.post("/api/allClass",p.a.stringify(t)).then(this.getListSucc)},getListSucc:function(t){this.changed&&(this.movieList=[],this.changed=!1),t=t.data,this.movieList=this.movieList.concat(t.data.movieList),this.isLoading=!1},classChange:function(t){this.className=t},areaChange:function(t){this.areaName=t},getClassName:function(){r.a.get("/api/static/classNames").then(this.getClassSucc)},getClassSucc:function(t){t=t.data,this.classNames=t.data.classNames},getAreaName:function(){r.a.get("/api/static/areaNames").then(this.getAreaSucc)},getAreaSucc:function(t){t=t.data,this.areaNames=t.data.areaNames},handleScroll:function(){var t=document.documentElement.clientHeight,e=document.body.scrollHeight,i=document.documentElement.scrollTop||document.body.scrollTop;t+i>e-30&&(this.isLoading||(++this.page,this.getMovieList())),this.topShow=i>20}},watch:{className:function(){this.changed=!0,this.getMovieList()},areaName:function(){this.changed=!0,this.getMovieList()}},mounted:function(){this.getMovieList(),this.getClassName(),this.getAreaName(),window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},St={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("all-header",{attrs:{title:"全部电影"}}),t._v(" "),i("all-choose",{staticClass:"choose",attrs:{title:"全部分类",list:t.classNames},on:{choose:t.classChange}}),t._v(" "),i("all-choose",{attrs:{title:"全部地区",list:t.areaNames},on:{choose:t.areaChange}}),t._v(" "),i("all-list",{staticClass:"movie-list",attrs:{list:t.movieList}}),t._v(" "),i("top",{attrs:{show:t.topShow}})],1)},staticRenderFns:[]};var Lt=i("VU/8")(bt,St,!1,function(t){i("sMBe")},"data-v-07089c29",null).exports,xt={name:"ListSliderForMyComment",props:{list:Array,title:String},data:function(){return{newList:this.list,chooseIndex:0,timer:null}},updated:function(){},methods:{handleItemClick:function(t){var e=t.target.dataset.id,i=t.target.dataset.index;this.chooseIndex=i,this.$emit("choose",e)},touchStart:function(t){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.$router.push("/detail/"+t.target.dataset.id)},600)},touchEnd:function(){clearTimeout(this.timer)},touchMove:function(){clearTimeout(this.timer)}}},$t={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"list-head"},[i("div",{staticClass:"list-title"},[t._v(t._s(t.title))]),t._v(" "),i("router-link",{attrs:{to:"/all"}},[i("div",{staticClass:"list-more"},[t._v("全部电影 >>>")])])],1),t._v(" "),i("div",{staticClass:"list-wrapper"},t._l(t.list,function(e,a){return i("div",{key:e.movie_id,staticClass:"item-wrapper",class:{active:t.chooseIndex==a}},[i("div",{staticClass:"item-cover",attrs:{"data-id":e.movie_id,"data-index":a},on:{click:t.handleItemClick,touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}}),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item-top"},[i("img",{staticClass:"item-img",attrs:{src:e.cover_pic}}),t._v(" "),i("div",{staticClass:"item-score"},[t._v(t._s(e.douban_score))])]),t._v(" "),i("div",{staticClass:"item-middle"},[i("div",{staticClass:"item-title"},[t._v(t._s(e.name))])]),t._v(" "),i("div",{staticClass:"item-bottom"},[i("div",{staticClass:"item-desc"},[t._v(t._s(e.classification))])])])])}),0)])},staticRenderFns:[]};var yt=i("VU/8")(xt,$t,!1,function(t){i("Ucph")},"data-v-da5e3c9a",null).exports,It={name:"CommentItemForMyComment",props:{content:Object,id:[String,Number]},components:{Avatar:v},data:function(){return{timer:null}},methods:{touchStart:function(){var t=this,e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.$store.state.userStatus&&e.$emit("delete",t.id,t.content.time)},600)},touchEnd:function(){clearTimeout(this.timer)},touchMove:function(){clearTimeout(this.timer)}}},Ut={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[i("div",{staticClass:"user"},[i("avatar",{attrs:{imgUrl:this.$store.state.avatar}}),t._v(" "),i("div",{staticClass:"username"},[t._v(t._s(this.$store.state.nickname))])],1),t._v(" "),i("div",{staticClass:"comment"},[t._v(t._s(t.content.content))])])},staticRenderFns:[]};var Nt=i("VU/8")(It,Ut,!1,function(t){i("ubBT")},"data-v-5fb149d5",null).exports,Tt={name:"CommentForMyComment",props:{list:Array},components:{CommentItem:Nt},methods:{deleteComment:function(t,e){this.$emit("delete",t,e)}}},Bt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container border-bottom"},[i("div",{staticClass:"top"},[t._v("评论 ("+t._s(Object.keys(t.list).length)+")")]),t._v(" "),i("transition-group",{attrs:{name:"comment",mode:"out-in"}},t._l(t.list,function(e,a){return i("comment-item",{key:JSON.stringify(e),staticClass:"comment-item",attrs:{content:e,id:a},on:{delete:t.deleteComment}})}),1)],1)},staticRenderFns:[]};var Ot={name:"MyComment",components:{MovieList:yt,Comment:i("VU/8")(Tt,Bt,!1,function(t){i("ftVO")},"data-v-6ff24d66",null).exports,CommentHeader:W},data:function(){return{movieList:[],id:0,commentList:[]}},methods:{updateUserInfo:function(){r.a.post("/api/usr/usrInfo").then(this.updateInfoSucc)},updateInfoSucc:function(t){t=t.data.data,this.$store.commit("changeNickname",{nickname:t.nickname}),this.$store.commit("changeAvatar",{avatar:t.head_pic})},getMovieList:function(){r.a.post("/api/usr/myCommentMovie").then(this.getMovieSucc)},getMovieSucc:function(t){t=t.data,this.movieList=t.data.movieList,this.movieList.length&&(this.id=this.movieList[0].movie_id,this.getCommentList())},movieChange:function(t){this.id=t,this.getCommentList()},getCommentList:function(){r.a.post("/api/usr/myComment",p.a.stringify({movie_id:this.id})).then(this.getCommentSucc)},getCommentSucc:function(t){t=t.data,this.commentList=t.data.commentList},deleteComment:function(t,e){this.commentList.splice(t,1),r.a.post("/api/usr/deleteMyComment/"+e).then(function(t){})}},mounted:function(){this.getMovieList(),this.updateUserInfo()}},Mt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrapper"},[e("comment-header",{attrs:{title:"影推"}}),this._v(" "),e("movie-list",{staticClass:"movie-list",attrs:{title:"我评论过的电影",list:this.movieList},on:{choose:this.movieChange}}),this._v(" "),e("comment",{directives:[{name:"show",rawName:"v-show",value:this.movieList.length,expression:"movieList.length"}],attrs:{list:this.commentList},on:{delete:this.deleteComment}})],1)},staticRenderFns:[]};var Et=i("VU/8")(Ot,Mt,!1,function(t){i("wOA7")},"data-v-3686464c",null).exports;a.default.use(c.a);var At=new c.a({routes:[{path:"/",name:"Home",component:z},{path:"/detail/:id",name:"Detail",component:vt},{path:"/my",name:"MyMovie",component:ft},{path:"/all",name:"All",component:Lt},{path:"/mycomment",name:"MyComment",component:Et}],scrollBehavior:function(t,e,i){return{x:0,y:0}}}),Rt=i("iDdd"),Dt=i.n(Rt),jt=i("ZaBw"),Ft=i.n(jt),Vt=i("kciL");a.default.use(Vt.a);var Ht=localStorage.getItem("username")||"未登录",qt=localStorage.getItem("userStatus")||!1,Pt=localStorage.getItem("nickname")||"未登录",zt=localStorage.getItem("avatar")||"static/avatar.jpeg",Zt=new Vt.a.Store({state:{username:Ht,userStatus:qt,nickname:Pt,avatar:zt},mutations:{changeUser:function(t,e){t.username=e.username,t.userStatus=e.userStatus,t.nickname=e.nickname,t.avatar=e.avatar,localStorage.setItem("username",e.username),localStorage.setItem("userStatus",e.userStatus),localStorage.setItem("nickname",e.nickname),localStorage.setItem("avatar",e.avatar),e.userStatus||(localStorage.removeItem("username"),localStorage.removeItem("userStatus"),localStorage.removeItem("nickname"),localStorage.removeItem("avatar"))},changeNickname:function(t,e){t.nickname=e.nickname,localStorage.setItem("nickname",e.nickname)},changeAvatar:function(t,e){t.avatar=e.avatar,localStorage.setItem("avatar",e.avatar)}}}),Jt=(i("9n10"),i("M6Sr"),i("TzC8"),i("S6Il"),i("5OHe"),i("V5iU")),Yt=i.n(Jt);a.default.prototype.$axios=r.a,a.default.config.productionTip=!1,Dt.a.attach(document.body),a.default.use(Ft.a),a.default.use(Yt.a),a.default.use(U.a),r.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",new a.default({el:"#app",router:At,store:Zt,components:{App:n},template:"<App/>"})},S6Il:function(t,e){},TIr1:function(t,e){},TzC8:function(t,e){},Ucph:function(t,e){},UpxS:function(t,e){},V5iU:function(t,e){},b6QU:function(t,e){},cqTP:function(t,e){},ftVO:function(t,e){},gZkL:function(t,e){},i2eJ:function(t,e){},jDrW:function(t,e){},nZBw:function(t,e){},obX7:function(t,e){},omAu:function(t,e){},"qD/T":function(t,e){},rjUk:function(t,e){},sMBe:function(t,e){},ubBT:function(t,e){},"v/5q":function(t,e){},vsO3:function(t,e){},wOA7:function(t,e){},x36r:function(t,e){},"zk/8":function(t,e){}},["NHnr"]);